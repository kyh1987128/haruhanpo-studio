<!-- ì˜¨ë³´ë”© ëª¨ë‹¬ ì‹œìŠ¤í…œ -->
<style>
  /* ì˜¨ë³´ë”© ì˜¤ë²„ë ˆì´ */
  .onboarding-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s;
  }

  .onboarding-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  /* ì˜¨ë³´ë”© ëª¨ë‹¬ */
  .onboarding-modal {
    background: white;
    border-radius: 1rem;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    max-width: 600px;
    width: 90%;
    max-height: 90vh;
    overflow-y: auto;
    transform: scale(0.9);
    transition: transform 0.3s;
  }

  .onboarding-overlay.active .onboarding-modal {
    transform: scale(1);
  }

  /* ë‹¨ê³„ í‘œì‹œ */
  .step-indicator {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
  }

  .step-dot {
    height: 0.5rem;
    flex: 1;
    background: #e5e7eb;
    border-radius: 0.25rem;
    transition: background 0.3s;
  }

  .step-dot.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }

  .step-dot.completed {
    background: #10b981;
  }

  /* í…œí”Œë¦¿ ì„ íƒ */
  .template-card {
    border: 2px solid #e5e7eb;
    border-radius: 0.75rem;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .template-card:hover {
    border-color: #667eea;
    background: #f9fafb;
  }

  .template-card.selected {
    border-color: #667eea;
    background: #ede9fe;
  }

  /* ë²„íŠ¼ */
  .onboarding-button {
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    font-weight: 600;
    transition: all 0.2s;
    cursor: pointer;
  }

  .onboarding-button-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
  }

  .onboarding-button-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  }

  .onboarding-button-secondary {
    background: white;
    color: #6b7280;
    border: 1px solid #e5e7eb;
  }

  .onboarding-button-secondary:hover {
    background: #f9fafb;
  }

  /* ì…ë ¥ í•„ë“œ */
  .onboarding-input {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    font-size: 1rem;
    transition: all 0.2s;
  }

  .onboarding-input:focus {
    outline: none;
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
  }

  /* ì²´í¬ë°•ìŠ¤ */
  .platform-checkbox {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem;
    border: 2px solid #e5e7eb;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: all 0.2s;
  }

  .platform-checkbox:hover {
    border-color: #667eea;
    background: #f9fafb;
  }

  .platform-checkbox.checked {
    border-color: #667eea;
    background: #ede9fe;
  }

  .platform-checkbox input[type="checkbox"] {
    width: 1.25rem;
    height: 1.25rem;
  }
</style>

<!-- ì˜¨ë³´ë”© ì˜¤ë²„ë ˆì´ -->
<div class="onboarding-overlay" id="onboardingOverlay">
  <div class="onboarding-modal">
    <!-- Step 1: í™˜ì˜ & í…œí”Œë¦¿ ì„ íƒ -->
    <div class="onboarding-step" id="step1" style="display: none;">
      <div style="padding: 2rem;">
        <!-- ë‹¨ê³„ í‘œì‹œ -->
        <div class="step-indicator">
          <div class="step-dot active"></div>
          <div class="step-dot"></div>
          <div class="step-dot"></div>
        </div>

        <!-- í—¤ë” -->
        <div style="text-align: center; margin-bottom: 2rem;">
          <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ‰</div>
          <h2 style="font-size: 1.875rem; font-weight: 700; color: #1f2937; margin-bottom: 0.5rem;">
            í™˜ì˜í•©ë‹ˆë‹¤!
          </h2>
          <p style="color: #6b7280;">
            ì²« ì½˜í…ì¸ ë¥¼ 3ë¶„ ì•ˆì— ë§Œë“¤ì–´ë³´ì„¸ìš”
          </p>
        </div>

        <!-- í…œí”Œë¦¿ ì„ íƒ -->
        <div style="margin-bottom: 2rem;">
          <h3 style="font-weight: 600; margin-bottom: 1rem; color: #374151;">
            ì–´ë–¤ ì½˜í…ì¸ ë¥¼ ë§Œë“¤ê¹Œìš”?
          </h3>
          <div style="display: grid; gap: 1rem;">
            <div class="template-card" data-template="travel">
              <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 2rem;">âœˆï¸</div>
                <div>
                  <div style="font-weight: 600; color: #1f2937;">ì—¬í–‰ ë¸Œì´ë¡œê·¸</div>
                  <div style="font-size: 0.875rem; color: #6b7280;">ìœ íŠœë¸Œ ì‡¼ì¸ , ì¸ìŠ¤íƒ€ê·¸ë¨ ë¦´ìŠ¤</div>
                </div>
              </div>
            </div>

            <div class="template-card" data-template="food">
              <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 2rem;">ğŸœ</div>
                <div>
                  <div style="font-weight: 600; color: #1f2937;">ë§›ì§‘ ë¦¬ë·°</div>
                  <div style="font-size: 0.875rem; color: #6b7280;">ë„¤ì´ë²„ ë¸”ë¡œê·¸, ì¸ìŠ¤íƒ€ê·¸ë¨</div>
                </div>
              </div>
            </div>

            <div class="template-card" data-template="business">
              <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 2rem;">ğŸ’¼</div>
                <div>
                  <div style="font-weight: 600; color: #1f2937;">ë¹„ì¦ˆë‹ˆìŠ¤ ì½˜í…ì¸ </div>
                  <div style="font-size: 0.875rem; color: #6b7280;">ë¸ŒëŸ°ì¹˜, ìœ íŠœë¸Œ ë¡±í¼</div>
                </div>
              </div>
            </div>

            <div class="template-card" data-template="custom">
              <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 2rem;">âœ¨</div>
                <div>
                  <div style="font-weight: 600; color: #1f2937;">ì§ì ‘ ì„¤ì •í•˜ê¸°</div>
                  <div style="font-size: 0.875rem; color: #6b7280;">ë‚˜ë§Œì˜ ë§ì¶¤ ì½˜í…ì¸ </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- ë²„íŠ¼ -->
        <div style="display: flex; gap: 1rem;">
          <button class="onboarding-button onboarding-button-secondary" onclick="skipOnboarding()" style="flex: 1;">
            ë‚˜ì¤‘ì— í•˜ê¸°
          </button>
          <button class="onboarding-button onboarding-button-primary" onclick="nextStep(2)" style="flex: 2;" id="step1Next" disabled>
            ë‹¤ìŒ ë‹¨ê³„
          </button>
        </div>
      </div>
    </div>

    <!-- Step 2: ê¸°ë³¸ ì •ë³´ ì…ë ¥ -->
    <div class="onboarding-step" id="step2" style="display: none;">
      <div style="padding: 2rem;">
        <!-- ë‹¨ê³„ í‘œì‹œ -->
        <div class="step-indicator">
          <div class="step-dot completed"></div>
          <div class="step-dot active"></div>
          <div class="step-dot"></div>
        </div>

        <!-- í—¤ë” -->
        <div style="text-align: center; margin-bottom: 2rem;">
          <div style="font-size: 3rem; margin-bottom: 1rem;">âœï¸</div>
          <h2 style="font-size: 1.875rem; font-weight: 700; color: #1f2937; margin-bottom: 0.5rem;">
            ê¸°ë³¸ ì •ë³´ ì…ë ¥
          </h2>
          <p style="color: #6b7280;">
            ë¸Œëœë“œ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ AIê°€ ë§ì¶¤ ì½˜í…ì¸ ë¥¼ ë§Œë“¤ì–´ìš”
          </p>
        </div>

        <!-- ì…ë ¥ í•„ë“œ -->
        <div style="margin-bottom: 2rem;">
          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #374151;">
              ë¸Œëœë“œ/ì±„ë„ ì´ë¦„
            </label>
            <input type="text" class="onboarding-input" id="onboardingBrand" placeholder="ì˜ˆ: ì—¬í–‰ê°€ ì² ìˆ˜">
          </div>

          <div style="margin-bottom: 1.5rem;">
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #374151;">
              ì‚°ì—…/ë¶„ì•¼
            </label>
            <select class="onboarding-input" id="onboardingIndustry">
              <option value="">ì„ íƒí•˜ì„¸ìš”</option>
              <option value="ì—¬í–‰/ë§›ì§‘">ì—¬í–‰/ë§›ì§‘</option>
              <option value="ë·°í‹°/íŒ¨ì…˜">ë·°í‹°/íŒ¨ì…˜</option>
              <option value="IT/ê¸°ìˆ ">IT/ê¸°ìˆ </option>
              <option value="êµìœ¡">êµìœ¡</option>
              <option value="ë¹„ì¦ˆë‹ˆìŠ¤">ë¹„ì¦ˆë‹ˆìŠ¤</option>
              <option value="ë¼ì´í”„ìŠ¤íƒ€ì¼">ë¼ì´í”„ìŠ¤íƒ€ì¼</option>
              <option value="ê¸°íƒ€">ê¸°íƒ€</option>
            </select>
          </div>

          <div>
            <label style="display: block; font-weight: 600; margin-bottom: 0.5rem; color: #374151;">
              ì£¼ìš” í‚¤ì›Œë“œ (ì„ íƒ)
            </label>
            <input type="text" class="onboarding-input" id="onboardingKeywords" placeholder="ì˜ˆ: ê°€ì„±ë¹„, íë§, ë¡œì»¬ ë§›ì§‘">
            <p style="font-size: 0.875rem; color: #6b7280; margin-top: 0.5rem;">
              ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•´ì£¼ì„¸ìš”
            </p>
          </div>
        </div>

        <!-- ë²„íŠ¼ -->
        <div style="display: flex; gap: 1rem;">
          <button class="onboarding-button onboarding-button-secondary" onclick="prevStep(1)" style="flex: 1;">
            ì´ì „
          </button>
          <button class="onboarding-button onboarding-button-primary" onclick="nextStep(3)" style="flex: 2;" id="step2Next">
            ë‹¤ìŒ ë‹¨ê³„
          </button>
        </div>
      </div>
    </div>

    <!-- Step 3: í”Œë«í¼ ì„ íƒ -->
    <div class="onboarding-step" id="step3" style="display: none;">
      <div style="padding: 2rem;">
        <!-- ë‹¨ê³„ í‘œì‹œ -->
        <div class="step-indicator">
          <div class="step-dot completed"></div>
          <div class="step-dot completed"></div>
          <div class="step-dot active"></div>
        </div>

        <!-- í—¤ë” -->
        <div style="text-align: center; margin-bottom: 2rem;">
          <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ¯</div>
          <h2 style="font-size: 1.875rem; font-weight: 700; color: #1f2937; margin-bottom: 0.5rem;">
            í”Œë«í¼ ì„ íƒ
          </h2>
          <p style="color: #6b7280;">
            ì–´ë””ì— ì˜¬ë¦´ ì½˜í…ì¸ ë¥¼ ë§Œë“¤ê¹Œìš”?
          </p>
        </div>

        <!-- í”Œë«í¼ ì„ íƒ -->
        <div style="margin-bottom: 2rem;">
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
            <label class="platform-checkbox">
              <input type="checkbox" name="platform" value="youtube_shorts">
              <div>
                <div style="font-weight: 600;">ğŸ“¹ ìœ íŠœë¸Œ ì‡¼ì¸ </div>
                <div style="font-size: 0.875rem; color: #6b7280;">15-60ì´ˆ ì˜ìƒ</div>
              </div>
            </label>

            <label class="platform-checkbox">
              <input type="checkbox" name="platform" value="instagram_reels">
              <div>
                <div style="font-weight: 600;">ğŸ“· ì¸ìŠ¤íƒ€ê·¸ë¨ ë¦´ìŠ¤</div>
                <div style="font-size: 0.875rem; color: #6b7280;">15-90ì´ˆ ì˜ìƒ</div>
              </div>
            </label>

            <label class="platform-checkbox">
              <input type="checkbox" name="platform" value="naver_blog">
              <div>
                <div style="font-weight: 600;">ğŸ“ ë„¤ì´ë²„ ë¸”ë¡œê·¸</div>
                <div style="font-size: 0.875rem; color: #6b7280;">ê¸´ ê¸€ ì½˜í…ì¸ </div>
              </div>
            </label>

            <label class="platform-checkbox">
              <input type="checkbox" name="platform" value="youtube_longform">
              <div>
                <div style="font-weight: 600;">ğŸ¬ ìœ íŠœë¸Œ ë¡±í¼</div>
                <div style="font-size: 0.875rem; color: #6b7280;">5-15ë¶„ ì˜ìƒ</div>
              </div>
            </label>
          </div>
        </div>

        <!-- ì˜ˆìƒ í¬ë ˆë”§ -->
        <div style="background: #f0fdf4; padding: 1rem; border-radius: 0.5rem; margin-bottom: 2rem;">
          <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
            <i class="fas fa-coins" style="color: #10b981;"></i>
            <span style="font-weight: 600; color: #065f46;">ì˜ˆìƒ ì‚¬ìš© í¬ë ˆë”§</span>
          </div>
          <div style="font-size: 1.5rem; font-weight: 700; color: #065f46;" id="estimatedCredits">0 í¬ë ˆë”§</div>
          <div style="font-size: 0.875rem; color: #047857; margin-top: 0.5rem;">
            ğŸ’¡ í”Œë«í¼ 1ê°œë‹¹ 1í¬ë ˆë”§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤
          </div>
        </div>

        <!-- ë²„íŠ¼ -->
        <div style="display: flex; gap: 1rem;">
          <button class="onboarding-button onboarding-button-secondary" onclick="prevStep(2)" style="flex: 1;">
            ì´ì „
          </button>
          <button class="onboarding-button onboarding-button-primary" onclick="completeOnboarding()" style="flex: 2;" id="step3Next">
            ğŸ‰ ì½˜í…ì¸  ìƒì„±í•˜ê¸°
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // ì˜¨ë³´ë”© ìƒíƒœ
  let onboardingState = {
    currentStep: 1,
    template: null,
    brand: '',
    industry: '',
    keywords: '',
    platforms: []
  };

  // ì˜¨ë³´ë”© ì‹œì‘
  function startOnboarding() {
    const overlay = document.getElementById('onboardingOverlay');
    overlay.classList.add('active');
    showStep(1);
  }

  // ë‹¨ê³„ í‘œì‹œ
  function showStep(step) {
    // ëª¨ë“  ë‹¨ê³„ ìˆ¨ê¸°ê¸°
    for (let i = 1; i <= 3; i++) {
      document.getElementById(`step${i}`).style.display = 'none';
    }
    // í˜„ì¬ ë‹¨ê³„ í‘œì‹œ
    document.getElementById(`step${step}`).style.display = 'block';
    onboardingState.currentStep = step;
  }

  // ë‹¤ìŒ ë‹¨ê³„
  function nextStep(step) {
    // í˜„ì¬ ë‹¨ê³„ ë°ì´í„° ì €ì¥
    if (onboardingState.currentStep === 1) {
      if (!onboardingState.template) {
        alert('í…œí”Œë¦¿ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
        return;
      }
    } else if (onboardingState.currentStep === 2) {
      onboardingState.brand = document.getElementById('onboardingBrand').value;
      onboardingState.industry = document.getElementById('onboardingIndustry').value;
      onboardingState.keywords = document.getElementById('onboardingKeywords').value;
      
      if (!onboardingState.brand || !onboardingState.industry) {
        alert('ë¸Œëœë“œ ì´ë¦„ê³¼ ì‚°ì—…/ë¶„ì•¼ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
        return;
      }
    }
    
    showStep(step);
  }

  // ì´ì „ ë‹¨ê³„
  function prevStep(step) {
    showStep(step);
  }

  // ì˜¨ë³´ë”© ê±´ë„ˆë›°ê¸°
  function skipOnboarding() {
    if (confirm('ì˜¨ë³´ë”©ì„ ê±´ë„ˆë›°ì‹œê² ìŠµë‹ˆê¹Œ?\nì–¸ì œë“  ì„¤ì •ì—ì„œ ë‹¤ì‹œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.')) {
      document.getElementById('onboardingOverlay').classList.remove('active');
      // ì˜¨ë³´ë”© ì™„ë£Œ ìƒíƒœ ì €ì¥
      if (typeof updateUserOnboardingStatus === 'function') {
        updateUserOnboardingStatus(true);
      }
    }
  }

  // ì˜¨ë³´ë”© ì™„ë£Œ
  function completeOnboarding() {
    // í”Œë«í¼ ì„ íƒ í™•ì¸
    const selectedPlatforms = Array.from(document.querySelectorAll('input[name="platform"]:checked'))
      .map(cb => cb.value);
    
    if (selectedPlatforms.length === 0) {
      alert('ìµœì†Œ 1ê°œì˜ í”Œë«í¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
      return;
    }
    
    onboardingState.platforms = selectedPlatforms;
    
    // ì˜¨ë³´ë”© ì™„ë£Œ ìƒíƒœ ì €ì¥
    if (typeof updateUserOnboardingStatus === 'function') {
      updateUserOnboardingStatus(true);
    }
    
    // ë©”ì¸ í¼ì— ë°ì´í„° ìë™ ì…ë ¥
    if (typeof fillFormWithOnboardingData === 'function') {
      fillFormWithOnboardingData(onboardingState);
    }
    
    // ì˜¤ë²„ë ˆì´ ë‹«ê¸°
    document.getElementById('onboardingOverlay').classList.remove('active');
    
    // ì„±ê³µ ë©”ì‹œì§€
    alert('ğŸ‰ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\nì´ì œ ì²« ì½˜í…ì¸ ë¥¼ ìƒì„±í•´ë³´ì„¸ìš”.');
  }

  // í…œí”Œë¦¿ ì„ íƒ ì´ë²¤íŠ¸
  document.addEventListener('DOMContentLoaded', () => {
    // í…œí”Œë¦¿ ì¹´ë“œ í´ë¦­
    document.querySelectorAll('.template-card').forEach(card => {
      card.addEventListener('click', () => {
        // ëª¨ë“  ì¹´ë“œ ì„ íƒ í•´ì œ
        document.querySelectorAll('.template-card').forEach(c => c.classList.remove('selected'));
        // í˜„ì¬ ì¹´ë“œ ì„ íƒ
        card.classList.add('selected');
        onboardingState.template = card.dataset.template;
        // ë‹¤ìŒ ë²„íŠ¼ í™œì„±í™”
        document.getElementById('step1Next').disabled = false;
      });
    });

    // í”Œë«í¼ ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼
    document.querySelectorAll('.platform-checkbox').forEach(label => {
      const checkbox = label.querySelector('input[type="checkbox"]');
      checkbox.addEventListener('change', () => {
        if (checkbox.checked) {
          label.classList.add('checked');
        } else {
          label.classList.remove('checked');
        }
        updateEstimatedCredits();
      });
    });
  });

  // ì˜ˆìƒ í¬ë ˆë”§ ì—…ë°ì´íŠ¸
  function updateEstimatedCredits() {
    const selectedCount = document.querySelectorAll('input[name="platform"]:checked').length;
    document.getElementById('estimatedCredits').textContent = `${selectedCount} í¬ë ˆë”§`;
  }
</script>
