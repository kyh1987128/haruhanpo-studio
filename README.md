# 콘텐츠잇다 AI Studio

## 프로젝트 개요
- **이름**: 콘텐츠잇다 AI Studio
- **부제**: 이미지로 4개 플랫폼 콘텐츠 자동 생성 🔒 내부 전용
- **목표**: 이미지와 브랜드 정보를 입력받아 원하는 플랫폼만 선택하여 최적화된 콘텐츠를 AI로 자동 생성
- **기술 스택**: Hono + TypeScript + Vite + OpenAI API (GPT-4o + Vision)

## 🌟 최신 기능 (v3.1 Enhanced)

### 🔑 **API 키 관리** ⭐ NEW v3.1
- **LocalStorage 기반**: 브라우저에 안전하게 API 키 저장
- **자동 표시/숨김**: API 키 없으면 입력 섹션 자동 표시
- **간편한 설정**: 한 번 입력하면 계속 사용 가능
- **프라이버시 보호**: 키는 브라우저에만 저장되며 서버로 전송 시에만 사용

### 💰 **강화된 비용 계산기** ⭐ IMPROVED v3.1
- **실시간 자동 계산**: 이미지 개수와 플랫폼 선택 시 즉시 계산
- **달러 + 원화 동시 표시**: $0.06 ≈ ₩78 (환율 1,300원)
- **예상 소요 시간**: 몇 초 걸릴지 미리 확인
- **상세 분석**: 이미지 분석 비용 + 플랫폼별 비용 분리
- **시각적 개선**: 보라색 그라데이션 카드 디자인
- **24시간 환율 자동 업데이트**

### ⏳ **로딩 & 에러 UI** ⭐ NEW v3.1
- **전체 화면 오버레이**: 생성 중 화면 전체 오버레이
- **실시간 진행률**: 0%~100% 진행률 바와 퍼센트 표시
- **단계별 메시지**: "이미지 분석 중..." → "콘텐츠 생성 중..."
- **스피너 애니메이션**: 부드러운 로딩 애니메이션
- **구체적 에러 메시지**: 에러 발생 시 원인과 해결 방법 제시
- **[재시도] 버튼**: 에러 발생 시 바로 재시도 가능

### 📝 **템플릿 관리 시스템** ⭐ NEW v3.1
- **플랫폼별 프롬프트 편집**: 블로그/인스타/스레드/유튜브 각각 커스터마이징
- **변수 시스템**: {브랜드명}, {키워드}, {톤앤매너}, {타겟연령대}, {타겟성별}, {산업분야}
- **변수 안내**: 모달 상단에 사용 가능한 변수 목록 표시
- **[기본값 초기화]**: 언제든지 기본 템플릿으로 복원
- **[저장] 버튼**: 수정한 템플릿 LocalStorage에 저장
- **최대 50개 템플릿**: 브라우저에 자동 저장

### 📋 **복사 버튼 & 토스트** ⭐ NEW v3.1
- **각 플랫폼마다 복사 버튼**: 탭마다 "📋 복사하기" 버튼 명확하게 표시
- **클립보드 복사**: 원클릭으로 콘텐츠 복사
- **토스트 메시지**: "✅ 복사됨!" 우측 하단에 3초간 표시
- **에러 피드백**: 복사 실패 시 "❌ 복사 실패" 메시지
- **다양한 토스트**: 성공(초록), 에러(빨강), 정보(파랑), 경고(노랑)

### 📊 **확장된 옵션** ⭐ IMPROVED v3.1
- **브랜드명 필드**: "브랜드명 / 서비스명 / 상품명"으로 확장
  - Placeholder: "예: 올리브영 / 스킨케어 라인 / 수분크림"
- **산업분야 15개**: 뷰티, 패션, F&B, IT/테크, 헬스케어, 라이프스타일, 교육, 의료, 부동산, 금융, 법률, 여행/관광, 반려동물, 자동차, 가전/전자, 스포츠/레저
- **톤앤매너 8개**: 친근한, 전문가, 감성, 유머러스, 신뢰감, 트렌디, 고급스러운, 실용적

### 🌍 **간소화된 언어 선택** v3.1
- **2개 언어**: 한국어 🇰🇷, English 🇺🇸
- **우측 상단 버튼**: 원클릭 언어 전환

### 🤖 **GPT-4o 고정** v3.1
- **최고 품질 모델**: GPT-4o만 사용 (모델 선택 드롭다운 제거)
- **최적의 성능**: 이미지 분석 + 콘텐츠 생성 모두 GPT-4o

## 주요 기능

### ✨ 핵심 기능

#### 1. **다중 이미지 업로드** (최대 10장, 총 50MB)
- 드래그 앤 드롭 지원
- 실시간 미리보기
- 이미지 개별 삭제 기능
- 이미지 편집 기능 (흑백, 밝기, 대비, 70% 압축)

#### 2. **확장된 브랜드 정보 입력**
**기본 정보:**
- 브랜드명 / 서비스명 / 상품명 (필수) ⭐ IMPROVED
- 회사 상호명
- 핵심 키워드 (필수, 쉼표로 구분)

**사업자 정보:**
- 사업자 유형 (개인/법인/프리랜서)
- 지역 (전국 17개 시도)
- 타겟 성별 (전체/남성/여성)

**연락처 정보:**
- 전화번호
- 웹사이트 URL
- SNS 계정 (@아이디)

**타겟팅 설정:**
- 톤앤매너 (8개 옵션) ⭐ IMPROVED
- 타겟 연령대 (10대~50대+)
- 산업 분야 (15개 옵션) ⭐ IMPROVED

#### 3. **브랜드 프로필 관리**
- **프로필 저장**: 입력한 브랜드 정보를 프로필로 저장
- **프로필 불러오기**: 저장된 프로필 목록에서 선택하여 빠르게 적용
- **프로필 삭제**: 불필요한 프로필 제거
- **LocalStorage 저장**: 브라우저에 자동 저장 (최대 50개)

#### 4. **콘텐츠 히스토리**
- **자동 저장**: 생성된 모든 콘텐츠 자동 저장
- **히스토리 조회**: 날짜별 생성 히스토리 확인
- **재사용**: 과거 생성된 콘텐츠 다시 불러오기
- **히스토리 삭제**: 불필요한 히스토리 제거
- **LocalStorage 저장**: 브라우저에 자동 저장 (최대 50개)

#### 5. **플랫폼 선택형 콘텐츠 생성**
- ✅ 네이버 블로그 (1,300~2,000자)
- ✅ 인스타그램 (캡션 + 해시태그 25-30개)
- ✅ 스레드 (200-300자 + 해시태그 7-10개)
- ✅ 유튜브 숏폼 (스크립트 + 제목 + 설명 + 태그)
- 최소 1개 이상 선택 가능

#### 6. **AI 이미지 분석**
- OpenAI Vision API로 각 이미지 상세 분석
- 색상 톤, 분위기, 구도, 감정적 느낌 등 종합 분석
- 다중 이미지 동시 분석 지원

#### 7. **결과 관리**
- 탭 형태로 각 플랫폼 결과 표시
- 📋 복사 버튼 (클립보드) ⭐ NEW
- ✅ 복사됨! 토스트 메시지 ⭐ NEW
- 생성 시간 및 이미지 개수 표시

## URLs
- **로컬 개발**: http://localhost:3000
- **공개 URL**: https://3000-i41cq3n8pxi55gachwryg-de59bda9.sandbox.novita.ai

## 데이터 아키텍처

### 입력 데이터 구조
```typescript
{
  // 필수 필드
  brand: string;              // 브랜드명 / 서비스명 / 상품명
  keywords: string;           // 핵심 키워드 (쉼표 구분)
  images: string[];           // base64 이미지 배열
  platforms: string[];        // 선택된 플랫폼
  apiKey: string;            // OpenAI API 키 (LocalStorage에서)
  
  // 선택 필드 (확장 정보)
  companyName?: string;       // 회사 상호명
  businessType?: string;      // 사업자 유형 (개인/법인/프리랜서)
  location?: string;          // 지역
  targetGender?: string;      // 타겟 성별 (전체/남성/여성)
  contact?: string;           // 연락처
  website?: string;           // 웹사이트 URL
  sns?: string;               // SNS 계정
  
  // 타겟팅 설정
  tone: string;               // 톤앤매너 (8개 중 선택)
  targetAge: string;          // 타겟 연령대
  industry: string;           // 산업 분야 (15개 중 선택)
}
```

### 출력 데이터 구조
```typescript
{
  success: boolean;
  data: {
    blog?: string;         // 네이버 블로그 콘텐츠
    instagram?: string;    // 인스타그램 콘텐츠
    threads?: string;      // 스레드 콘텐츠
    youtube?: string;      // 유튜브 숏폼 콘텐츠
  };
  generatedPlatforms: string[];
  imageCount: number;
}
```

## 사용 가이드

### 1. 시작하기

#### OpenAI API 키 설정 ⭐ NEW
1. 페이지 로드 시 API 키 입력 섹션이 표시됩니다
2. [OpenAI API Keys](https://platform.openai.com/api-keys)에서 API 키 발급
3. "sk-proj-..."로 시작하는 API 키 입력
4. [저장] 버튼 클릭
5. 입력 섹션이 자동으로 숨겨지고 다음부터는 자동 사용됩니다

### 2. 콘텐츠 생성

#### 🎯 기본 워크플로우

1. **이미지 업로드**
   - 드래그 앤 드롭 또는 클릭하여 이미지 선택
   - 최대 10장, 총 50MB까지 업로드 가능
   - 편집 버튼으로 이미지 편집 가능 (흑백, 밝기, 대비, 압축)

2. **기본 정보 입력** (필수)
   - 브랜드명 / 서비스명 / 상품명 (필수) ⭐ IMPROVED
   - 핵심 키워드 (필수, 쉼표로 구분)

3. **확장 정보 입력** (선택)
   - 회사 상호명, 사업자 유형, 지역
   - 타겟 성별, 연락처, 웹사이트, SNS 계정

4. **타겟팅 설정**
   - 톤앤매너 (8개 중 선택) ⭐ IMPROVED
   - 타겟 연령대, 산업 분야 (15개 중 선택) ⭐ IMPROVED

5. **플랫폼 선택**
   - 생성하고 싶은 플랫폼 체크박스 선택 (최소 1개)
   - **실시간 비용 확인** ⭐ IMPROVED
     - 이미지 개수와 플랫폼에 따라 자동 계산
     - 달러 + 원화 동시 표시
     - 예상 소요 시간 확인

6. **콘텐츠 생성**
   - "콘텐츠 생성하기" 버튼 클릭
   - **로딩 화면** ⭐ NEW
     - 전체 화면 오버레이
     - 진행률 바 (0%~100%)
     - 단계별 메시지
   - 약 14~60초 대기 (이미지 개수와 플랫폼 개수에 따라 다름)

7. **결과 확인**
   - 탭을 클릭하여 각 플랫폼 콘텐츠 확인
   - **📋 복사하기 버튼** 클릭 ⭐ NEW
   - **✅ 복사됨!** 토스트 메시지 확인 ⭐ NEW

8. **에러 발생 시** ⭐ NEW
   - 구체적인 에러 메시지와 해결 방법 확인
   - [재시도] 버튼으로 바로 다시 시도

#### 💡 프로필 관리

**프로필 저장:**
1. 브랜드 정보 입력 완료
2. "프로필 저장" 버튼 클릭
3. 프로필 이름 입력
4. 저장 완료

**프로필 불러오기:**
1. "프로필 불러오기" 버튼 클릭
2. 저장된 프로필 목록에서 선택
3. 자동으로 모든 필드 채워짐

#### 📜 히스토리 활용

**히스토리 조회:**
1. "히스토리" 버튼 클릭
2. 날짜별 생성 목록 확인
3. 원하는 항목 클릭하여 재확인
4. 📋 복사하기로 다시 사용

#### 📝 템플릿 커스터마이징 ⭐ NEW

**템플릿 편집:**
1. "템플릿" 버튼 클릭
2. 플랫폼 선택 (블로그/인스타/스레드/유튜브)
3. 프롬프트 편집 텍스트박스에서 수정
4. **변수 사용**: {브랜드명}, {키워드}, {톤앤매너} 등
5. [저장] 버튼으로 저장
6. [기본값 초기화]로 언제든지 복원 가능

## 프로젝트 구조

```
webapp/
├── src/
│   ├── index.tsx              # 메인 Hono 애플리케이션 및 API 라우트
│   ├── prompts.ts             # 플랫폼별 프롬프트 템플릿
│   └── html-template.ts       # HTML 템플릿
├── public/
│   └── static/
│       ├── app-v3-enhanced.js # 프론트엔드 JavaScript (최신) ⭐
│       └── i18n.js            # 다국어 지원
├── dist/                      # 빌드 결과물 (자동 생성)
│   └── _worker.js             # Cloudflare Workers 번들
├── ecosystem.config.cjs       # PM2 설정
├── package.json               # 의존성 및 스크립트
├── tsconfig.json              # TypeScript 설정
├── vite.config.ts             # Vite 빌드 설정
└── wrangler.jsonc             # Cloudflare Pages 설정
```

## 기술 상세

### 백엔드 (Hono)
- **프레임워크**: Hono (경량, 빠른 edge 프레임워크)
- **런타임**: Cloudflare Workers (edge 환경)
- **API 엔드포인트**: `/api/generate`
- **CORS**: 모든 `/api/*` 경로에 CORS 활성화
- **API 키 처리**: 클라이언트에서 전달받은 API 키 사용 ⭐ NEW

### 프론트엔드
- **UI 프레임워크**: Tailwind CSS (CDN)
- **아이콘**: Font Awesome (CDN)
- **JavaScript**: Vanilla JS (프레임워크 없음)
- **로컬 저장소**: LocalStorage (API 키, 프로필, 히스토리, 템플릿)
- **기능**: 이미지 업로드, 폼 처리, 결과 표시, 복사/토스트

### AI 처리
- **모델**: GPT-4o 고정 (텍스트 생성 + 이미지 분석) ⭐
- **Vision API**: 이미지 상세 분석 (색상, 분위기, 구도 등)
- **병렬 처리**: 이미지 분석 및 콘텐츠 생성 동시 진행
- **토큰 최적화**: 프롬프트 최적화로 비용 절감

## 비용 예상

### OpenAI API 비용 (GPT-4o 고정)

**1. 이미지 분석**
- 이미지 1장당: $0.01 (약 ₩13)
- 10장 최대: $0.10 (약 ₩130)

**2. 콘텐츠 생성**
- 블로그: $0.04 (약 ₩52) - 2,000자 생성
- 인스타그램: $0.03 (약 ₩39) - 캡션 + 해시태그
- 스레드: $0.02 (약 ₩26) - 짧은 텍스트
- 유튜브: $0.04 (약 ₩52) - 스크립트 + 메타데이터

**예상 총 비용 & 소요 시간:**

| 상황 | 이미지 | 플랫폼 | 달러 | 원화 | 예상 시간 |
|------|--------|--------|------|------|-----------|
| 최소 | 1장 | 블로그만 | $0.05 | ₩65 | ~14초 |
| 일반 | 2장 | 블로그+인스타 | $0.09 | ₩117 | ~17초 |
| 권장 | 4장 | 전체 4개 | $0.17 | ₩221 | ~20초 |
| 최대 | 10장 | 전체 4개 | $0.23 | ₩299 | ~20초 |

**💡 실시간 비용 계산** ⭐ IMPROVED
- 앱에서 이미지와 플랫폼을 선택하면 실시간으로 예상 비용 표시
- 환율은 24시간마다 자동 업데이트
- 예상 소요 시간도 함께 표시

## 로컬 개발

```bash
# 의존성 설치
npm install

# 프로젝트 빌드
npm run build

# 개발 서버 시작 (PM2)
pm2 start ecosystem.config.cjs

# 서버 상태 확인
pm2 list

# 로그 확인 (비차단)
pm2 logs webapp --nostream

# 서버 재시작
fuser -k 3000/tcp 2>/dev/null || true
pm2 restart webapp

# 서버 중지
pm2 stop webapp
pm2 delete webapp
```

## 주의사항

### ⚠️ OpenAI API 키 보안
- API 키는 LocalStorage에만 저장됩니다 ⭐ NEW
- 서버로 전송 시에만 사용되며 저장되지 않습니다
- 브라우저를 사용하는 사람만 접근 가능합니다
- 절대 API 키를 공유하지 마세요

### ⚠️ 이미지 크기 제한
- 최대 10장, 총 50MB 제한
- 대용량 이미지는 처리 시간이 길어질 수 있음
- 권장: 이미지당 5MB 이하

### ⚠️ API 비용 관리
- 각 요청마다 OpenAI API 비용 발생
- 이미지 개수와 플랫폼 개수에 따라 비용 증가
- 실시간 비용 계산기로 미리 확인 ⭐

## 트러블슈팅

### 1. "OpenAI API 키를 먼저 설정해주세요" 오류 ⭐ NEW
- 페이지 상단의 API 키 입력 섹션이 자동으로 표시됩니다
- OpenAI에서 API 키를 발급받으세요
- "sk-proj-"로 시작하는 키를 입력하고 저장하세요

### 2. 이미지 업로드 실패
- 파일 크기 확인 (총 50MB 이하)
- 이미지 형식 확인 (JPEG, PNG, GIF 등)
- 토스트 메시지에서 구체적인 에러 확인 ⭐

### 3. 콘텐츠 생성 오류 ⭐ IMPROVED
- 에러 모달에 구체적인 원인과 해결 방법이 표시됩니다
- [재시도] 버튼으로 바로 다시 시도하세요
- API 키가 유효한지 확인하세요
- 네트워크 연결을 확인하세요

### 4. 서버 시작 실패
- 포트 3000 사용 중 확인: `fuser -k 3000/tcp`
- 빌드 재실행: `npm run build`
- PM2 재시작: `pm2 restart webapp`

## 개발 로드맵

### ✅ 완료된 기능 (v3.1 Enhanced)
- ✅ **API 키 LocalStorage 관리** (v3.1) ⭐
- ✅ **강화된 실시간 비용 계산기** (v3.1) ⭐
- ✅ **로딩/에러 UI (진행률, 재시도)** (v3.1) ⭐
- ✅ **템플릿 관리 시스템 (변수, 편집, 저장)** (v3.1) ⭐
- ✅ **복사 버튼 & 토스트 메시지** (v3.1) ⭐
- ✅ **브랜드명 필드 확장** (v3.1) ⭐
- ✅ **산업분야 15개 확장** (v3.1) ⭐
- ✅ **톤앤매너 8개 확장** (v3.1) ⭐
- ✅ **GPT-4o 고정** (v3.1) ⭐
- ✅ **언어 선택 간소화 (KR/US)** (v3.1) ⭐
- ✅ 이미지 편집 (v3.0) - 필터, 압축 기능
- ✅ 비용 계산기 (v2.0) - 실시간 달러/원화
- ✅ 프로필 관리 (v2.0) - 저장/불러오기
- ✅ 콘텐츠 히스토리 (v2.0) - 자동 저장/재사용
- ✅ 확장 입력 폼 (v2.0) - 회사명, 지역, 성별 등
- ✅ 다중 이미지 업로드 (10장, 50MB)
- ✅ 4개 플랫폼 콘텐츠 생성
- ✅ 이미지 AI 분석 (OpenAI Vision)
- ✅ 반응형 UI

### 📋 향후 계획 (v4.0)
- 📋 커스텀 템플릿 백엔드 적용
- 📋 이미지 크롭/회전 추가
- 📋 추가 플랫폼 (페이스북, TikTok)
- 📋 콘텐츠 A/B 테스트
- 📋 PWA 지원

## 라이선스
MIT License

## 개발자
GenSpark AI Agent

## 마지막 업데이트
- **버전**: v3.1 Enhanced
- **날짜**: 2024-12-24
- **변경사항**: API 키 UI, 비용 계산기 강화, 로딩/에러 UI, 템플릿 시스템, 복사 버튼, 옵션 확장
