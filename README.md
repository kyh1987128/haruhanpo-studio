# 멀티 플랫폼 콘텐츠 자동 생성기

## 프로젝트 개요
- **이름**: 멀티 플랫폼 콘텐츠 자동 생성기
- **목표**: 이미지와 브랜드 정보를 입력받아 원하는 플랫폼만 선택하여 최적화된 콘텐츠를 AI로 자동 생성
- **기술 스택**: Hono + TypeScript + Vite + OpenAI API (GPT-4o + Vision)

## 🌟 최신 기능 (v3.0)

### 📝 **콘텐츠 템플릿 커스터마이징** ⭐ NEW v3.0
- **템플릿 생성**: 플랫폼별 커스텀 프롬프트 작성 및 저장
- **템플릿 관리**: 저장된 템플릿 수정, 적용, 삭제
- **LocalStorage**: 최대 50개 템플릿 브라우저에 저장
- **반복 작업 간소화**: 자주 사용하는 스타일을 템플릿으로 관리

### 📊 **배치 생성 모드** ⭐ NEW v3.0
- **CSV 업로드**: 여러 브랜드 정보를 CSV로 한 번에 업로드
- **대량 처리**: 최대 수십 개 브랜드를 한 번에 처리
- **진행 상황**: 실시간 처리 상태 표시
- **결과 관리**: 브랜드별 개별 결과 카드로 표시
- **에이전시 활용**: 여러 클라이언트 관리에 최적화

### 🎨 **이미지 편집 기능** ⭐ NEW v3.0
- **필터 적용**: 흑백, 밝기, 대비 조절
- **이미지 압축**: 70% 품질로 파일 크기 감소
- **Canvas 기반**: 브라우저에서 직접 편집
- **즉시 적용**: 별도 도구 없이 바로 편집

### 🤖 **AI 모델 선택** ⭐ NEW v3.0
- **GPT-4o** (기본값): 최고 품질, 중간 속도
- **GPT-4 Turbo**: 높은 품질, 느린 속도, 높은 비용
- **GPT-3.5 Turbo**: 기본 품질, 빠른 속도, 저렴한 비용
- **LocalStorage**: 선택한 모델 자동 저장

### 🌍 **다국어 지원** (v2.0)
- **4개 언어 지원**: 한국어, English, 日本語, 中文
- **원클릭 전환**: 우측 상단 국기 버튼으로 즉시 언어 변경
- **자동 저장**: 선택한 언어 브라우저에 저장
- **전체 번역**: 모든 UI 요소 완벽 번역

### 💰 **향상된 비용 계산기** (v2.0)
- **달러 + 원화 동시 표시**: $0.06 ≈ ₩78
- **실시간 환율**: 24시간마다 자동 업데이트
- **상세 분석**: 이미지 분석 비용 + 플랫폼별 비용 분리 표시
- **시각적 개선**: 그라데이션 카드로 보기 좋은 디자인

## 주요 기능

### ✨ 핵심 기능

#### 1. **다중 이미지 업로드** (최대 10장, 총 50MB)
- 드래그 앤 드롭 지원
- 실시간 미리보기
- 이미지 개별 삭제 기능

#### 2. **확장된 브랜드 정보 입력** ⭐ NEW
**기본 정보:**
- 브랜드명 (필수)
- 회사 상호명
- 핵심 키워드 (필수, 쉼표로 구분)

**사업자 정보:**
- 사업자 유형 (개인/법인/프리랜서)
- 지역 (전국 17개 시도)
- 타겟 성별 (전체/남성/여성)

**연락처 정보:**
- 전화번호
- 웹사이트 URL
- SNS 계정 (@아이디)

**타겟팅 설정:**
- 톤앤매너 (캐주얼/전문가/감성)
- 타겟 연령대 (10대~50대+)
- 산업 분야 (뷰티/패션/F&B/IT/헬스케어/라이프스타일)

#### 3. **브랜드 프로필 관리** ⭐ NEW
- **프로필 저장**: 입력한 브랜드 정보를 프로필로 저장
- **프로필 불러오기**: 저장된 프로필 목록에서 선택하여 빠르게 적용
- **프로필 삭제**: 불필요한 프로필 제거
- **LocalStorage 저장**: 브라우저에 자동 저장 (최대 50개)

#### 4. **콘텐츠 히스토리** ⭐ NEW
- **자동 저장**: 생성된 모든 콘텐츠 자동 저장
- **히스토리 조회**: 날짜별 생성 히스토리 확인
- **재사용**: 과거 생성된 콘텐츠 다시 불러오기
- **히스토리 삭제**: 불필요한 히스토리 제거
- **LocalStorage 저장**: 브라우저에 자동 저장 (최대 50개)

#### 5. **실시간 비용 계산** ⭐ NEW
- **예상 비용 표시**: 이미지 개수와 플랫폼 선택에 따른 OpenAI API 비용 실시간 계산
- **투명한 비용 정보**: 이미지 분석 비용 + 플랫폼별 생성 비용 상세 표시
- **비용 예시**:
  - 이미지 2장 + 블로그만: $0.06
  - 이미지 10장 + 전체 플랫폼: $0.23

#### 6. **플랫폼 선택형 콘텐츠 생성**
- ✅ 네이버 블로그 (1,300~2,000자)
- ✅ 인스타그램 (캡션 + 해시태그 25-30개)
- ✅ 스레드 (200-300자 + 해시태그 7-10개)
- ✅ 유튜브 숏폼 (스크립트 + 제목 + 설명 + 태그)
- 최소 1개 이상 선택 가능

#### 7. **AI 이미지 분석**
- OpenAI Vision API로 각 이미지 상세 분석
- 색상 톤, 분위기, 구도, 감정적 느낌 등 종합 분석
- 다중 이미지 동시 분석 지원

#### 8. **결과 관리**
- 탭 형태로 각 플랫폼 결과 표시
- 복사 버튼 (클립보드)
- 다운로드 버튼 (.txt 파일)
- 실시간 글자 수 카운터 ⭐ NEW
- 생성 시간 및 이미지 개수 표시

## URLs
- **로컬 개발**: http://localhost:3000
- **공개 URL**: https://3000-i41cq3n8pxi55gachwryg-de59bda9.sandbox.novita.ai

## 데이터 아키텍처

### 입력 데이터 구조
```typescript
{
  // 필수 필드
  brand: string;              // 브랜드명
  keywords: string;           // 핵심 키워드 (쉼표 구분)
  images: string[];           // base64 이미지 배열
  platforms: string[];        // 선택된 플랫폼
  
  // 선택 필드 (확장 정보)
  companyName?: string;       // 회사 상호명
  businessType?: string;      // 사업자 유형 (개인/법인/프리랜서)
  location?: string;          // 지역
  targetGender?: string;      // 타겟 성별 (전체/남성/여성)
  contact?: string;           // 연락처
  website?: string;           // 웹사이트 URL
  sns?: string;               // SNS 계정
  
  // 타겟팅 설정
  tone: string;               // 톤앤매너
  targetAge: string;          // 타겟 연령대
  industry: string;           // 산업 분야
}
```

### 출력 데이터 구조
```typescript
{
  success: boolean;
  data: {
    blog?: string;         // 네이버 블로그 콘텐츠
    instagram?: string;    // 인스타그램 콘텐츠
    threads?: string;      // 스레드 콘텐츠
    youtube?: string;      // 유튜브 숏폼 콘텐츠
  };
  generatedPlatforms: string[];
  imageCount: number;
}
```

### AI 처리 흐름
1. **이미지 분석**: OpenAI Vision API로 각 이미지 상세 분석 (병렬 처리)
2. **프롬프트 생성**: 플랫폼별 맞춤 프롬프트 생성
3. **콘텐츠 생성**: GPT-4o로 플랫폼별 콘텐츠 생성 (병렬 처리)
4. **결과 반환**: 생성된 콘텐츠를 JSON 형태로 반환

## 사용 가이드

### 1. 환경 설정

#### OpenAI API 키 설정
`.dev.vars` 파일에 OpenAI API 키를 추가하세요:

```bash
# .dev.vars
OPENAI_API_KEY=sk-proj-your-actual-api-key-here
```

**⚠️ 중요**: `.dev.vars` 파일은 `.gitignore`에 포함되어 있어 Git에 커밋되지 않습니다.

### 2. 로컬 개발

```bash
# 의존성 설치
npm install

# 프로젝트 빌드
npm run build

# 개발 서버 시작 (PM2)
pm2 start ecosystem.config.cjs

# 서버 상태 확인
pm2 list

# 로그 확인 (비차단)
pm2 logs webapp --nostream

# 서버 재시작
fuser -k 3000/tcp 2>/dev/null || true
pm2 restart webapp

# 서버 중지
pm2 stop webapp
pm2 delete webapp
```

### 3. 사용 방법

#### 🎯 기본 워크플로우

1. **이미지 업로드**
   - 드래그 앤 드롭 또는 클릭하여 이미지 선택
   - 최대 10장, 총 50MB까지 업로드 가능

2. **기본 정보 입력** (필수)
   - 브랜드명 (필수)
   - 핵심 키워드 (필수, 쉼표로 구분)

3. **확장 정보 입력** (선택) ⭐ NEW
   - 회사 상호명, 사업자 유형, 지역
   - 타겟 성별, 연락처, 웹사이트, SNS 계정

4. **타겟팅 설정**
   - 톤앤매너, 타겟 연령대, 산업 분야 선택

5. **플랫폼 선택**
   - 생성하고 싶은 플랫폼 체크박스 선택 (최소 1개)
   - **예상 비용 확인** ⭐ NEW

6. **콘텐츠 생성**
   - "콘텐츠 생성하기" 버튼 클릭
   - 약 30-60초 대기 (이미지 개수와 플랫폼 개수에 따라 다름)

7. **결과 확인**
   - 탭을 클릭하여 각 플랫폼 콘텐츠 확인
   - 글자 수 확인 ⭐ NEW
   - 복사 또는 다운로드 버튼으로 콘텐츠 저장

#### 💡 프로필 관리 ⭐ NEW

**프로필 저장:**
1. 브랜드 정보 입력 완료
2. "프로필 저장" 버튼 클릭
3. 프로필 이름 입력
4. 저장 완료

**프로필 불러오기:**
1. "프로필 불러오기" 버튼 클릭
2. 저장된 프로필 목록에서 선택
3. 자동으로 모든 필드 채워짐

#### 📜 히스토리 활용 ⭐ NEW

**히스토리 조회:**
1. "히스토리" 버튼 클릭
2. 날짜별 생성 목록 확인
3. 원하는 항목 클릭하여 재확인

**히스토리 자동 저장:**
- 모든 생성 결과 자동 저장 (최대 50개)
- 브라우저 LocalStorage에 저장
- 프라이버시 보호 (로컬 저장)

## 프로젝트 구조

```
webapp/
├── src/
│   ├── index.tsx          # 메인 Hono 애플리케이션 및 API 라우트
│   ├── prompts.ts         # 플랫폼별 프롬프트 템플릿
│   └── renderer.tsx       # SSR 렌더러
├── public/
│   └── static/
│       └── app.js         # 프론트엔드 JavaScript
├── dist/                  # 빌드 결과물 (자동 생성)
│   └── _worker.js         # Cloudflare Workers 번들
├── .dev.vars              # 개발 환경 변수 (OpenAI API 키)
├── .gitignore             # Git 제외 파일
├── ecosystem.config.cjs   # PM2 설정
├── package.json           # 의존성 및 스크립트
├── tsconfig.json          # TypeScript 설정
├── vite.config.ts         # Vite 빌드 설정
└── wrangler.jsonc         # Cloudflare Pages 설정
```

## 기술 상세

### 백엔드 (Hono)
- **프레임워크**: Hono (경량, 빠른 edge 프레임워크)
- **런타임**: Cloudflare Workers (edge 환경)
- **API 엔드포인트**: `/api/generate`
- **CORS**: 모든 `/api/*` 경로에 CORS 활성화

### 프론트엔드
- **UI 프레임워크**: Tailwind CSS (CDN)
- **아이콘**: Font Awesome (CDN)
- **JavaScript**: Vanilla JS (프레임워크 없음)
- **기능**: 이미지 업로드, 폼 처리, 결과 표시, 복사/다운로드

### AI 처리
- **모델**: GPT-4o (텍스트 생성 + 이미지 분석)
- **Vision API**: 이미지 상세 분석 (색상, 분위기, 구도 등)
- **병렬 처리**: 이미지 분석 및 콘텐츠 생성 동시 진행
- **토큰 최적화**: 프롬프트 최적화로 비용 절감

## 비용 예상

### OpenAI API 비용 (GPT-4o 기준)

**1. 이미지 분석**
- 이미지 1장당: $0.01 (약 ₩13)
- 10장 최대: $0.10 (약 ₩130)

**2. 콘텐츠 생성**
- 블로그: $0.04 (약 ₩52) - 2,000자 생성
- 인스타그램: $0.03 (약 ₩39) - 캡션 + 해시태그
- 스레드: $0.02 (약 ₩26) - 짧은 텍스트
- 유튜브: $0.04 (약 ₩52) - 스크립트 + 메타데이터

**예상 총 비용 예시:**

| 상황 | 이미지 | 플랫폼 | 달러 | 원화 (환율 1,300원) |
|------|--------|--------|------|---------------------|
| 최소 | 1장 | 블로그만 | $0.05 | ≈ ₩65 |
| 일반 | 2장 | 블로그+인스타 | $0.09 | ≈ ₩117 |
| 권장 | 4장 | 전체 4개 | $0.17 | ≈ ₩221 |
| 최대 | 10장 | 전체 4개 | $0.23 | ≈ ₩299 |

**💡 실시간 비용 계산**
- 앱에서 이미지와 플랫폼을 선택하면 실시간으로 예상 비용 표시
- 환율은 24시간마다 자동 업데이트

## 배포

### Cloudflare Pages 배포

1. **Cloudflare API 키 설정**
```bash
# setup_cloudflare_api_key 도구 사용 권장
```

2. **프로젝트 생성 및 배포**
```bash
# 빌드
npm run build

# Cloudflare Pages 프로젝트 생성
npx wrangler pages project create webapp --production-branch main

# 배포
npm run deploy:prod
```

3. **환경 변수 설정**
```bash
# OpenAI API 키 등록
npx wrangler pages secret put OPENAI_API_KEY --project-name webapp
```

4. **배포 확인**
```bash
# 프로덕션 URL: https://webapp.pages.dev
# 또는 커스텀 도메인 설정 가능
```

## 주의사항

### ⚠️ OpenAI API 키 보안
- `.dev.vars` 파일을 절대 Git에 커밋하지 마세요
- 프로덕션에서는 Cloudflare Pages Secrets 사용
- API 키를 프론트엔드에 노출하지 마세요

### ⚠️ 이미지 크기 제한
- 최대 10장, 총 50MB 제한
- 대용량 이미지는 처리 시간이 길어질 수 있음
- 권장: 이미지당 5MB 이하

### ⚠️ API 비용 관리
- 각 요청마다 OpenAI API 비용 발생
- 이미지 개수와 플랫폼 개수에 따라 비용 증가
- 테스트 시 소량의 이미지와 플랫폼으로 시작 권장

## 트러블슈팅

### 1. "OpenAI API 키가 설정되지 않았습니다" 오류
- `.dev.vars` 파일에 `OPENAI_API_KEY` 추가
- 프로덕션: Cloudflare Pages Secrets에 API 키 등록

### 2. 이미지 업로드 실패
- 파일 크기 확인 (총 50MB 이하)
- 이미지 형식 확인 (JPEG, PNG, GIF 등)
- 브라우저 콘솔에서 에러 확인

### 3. 콘텐츠 생성 오류
- OpenAI API 키 유효성 확인
- 네트워크 연결 확인
- 서버 로그 확인: `pm2 logs webapp --nostream`

### 4. 서버 시작 실패
- 포트 3000 사용 중 확인: `fuser -k 3000/tcp`
- 빌드 재실행: `npm run build`
- PM2 재시작: `pm2 restart webapp`

## 개발 로드맵

### ✅ 완료된 기능 (v3.0)
- ✅ **템플릿 커스터마이징** (v3.0) - 플랫폼별 프롬프트 저장/관리
- ✅ **배치 생성 모드** (v3.0) - CSV 업로드로 여러 브랜드 동시 처리
- ✅ **이미지 편집** (v3.0) - 필터, 압축 기능
- ✅ **AI 모델 선택** (v3.0) - GPT-4o/4-turbo/3.5-turbo
- ✅ **다국어 지원** (v2.0) - 한/영/일/중
- ✅ **비용 계산기** (v2.0) - 실시간 달러/원화
- ✅ **프로필 관리** (v2.0) - 저장/불러오기
- ✅ **콘텐츠 히스토리** (v2.0) - 자동 저장/재사용
- ✅ **확장 입력 폼** (v2.0) - 회사명, 지역, 성별 등 11개 항목
- ✅ 다중 이미지 업로드 (10장, 50MB)
- ✅ 4개 플랫폼 콘텐츠 생성 (블로그/인스타/스레드/유튜브)
- ✅ 이미지 AI 분석 (OpenAI Vision)
- ✅ 복사/다운로드 기능
- ✅ 반응형 UI

### 📋 향후 계획 (v4.0)
- 📋 템플릿 실제 적용 로직 (백엔드 통합)
- 📋 이미지 크롭/회전 기능 추가
- 📋 추가 플랫폼 (페이스북, 링크드인, TikTok)
- 📋 콘텐츠 A/B 테스트 모드
- 📋 배치 생성 병렬 처리 최적화
- 📋 PWA 지원 (오프라인 모드)

## 라이선스
MIT License

## 개발자
GenSpark AI Agent

## 📚 문서

- **README.md**: 프로젝트 개요 및 사용 가이드
- **TESTING_GUIDE.md**: v2.0 기능 테스트 가이드
- **AI_TESTING_FULL_SPEC.md**: v3.0 전수조사용 상세 명세 ⭐ NEW

## 마지막 업데이트
- **버전**: v3.0
- **날짜**: 2025-12-23
- **변경사항**: 템플릿 커스터마이징, 배치 생성, 이미지 편집, AI 모델 선택 추가
