# 마케팅허브 (Marketing Hub)

## 프로젝트 개요
- **이름**: 마케팅허브 (Marketing Hub)
- **부제**: 이미지/문서로 12개 플랫폼 콘텐츠 자동 생성 + 회원/결제 시스템
- **목표**: 이미지와 문서(PDF/DOCX/TXT)를 입력받아 원하는 플랫폼만 선택하여 최적화된 콘텐츠를 AI로 자동 생성
- **기술 스택**: 
  - Frontend: Hono + TypeScript + Vite + **Tailwind CSS v3 (Production Build)**
  - Backend: Cloudflare Workers + Supabase PostgreSQL + 토스페이먼츠
  - AI: OpenAI GPT-4o + Google Gemini Flash (하이브리드)

## 🌟 최신 업데이트

### 🚀 **v24.0.6 도움말 가이드 전면 개편 - 하루한포스트 사용 가치 명확화** ⭐⭐⭐ NEW (2026-01-28)
**"하루한포스트를 사용할 이유" 명확하게 제시**

**주요 변경사항:**
- ✅ **모든 플랫폼에 가치 제안 박스 추가**:
  - 🚀 **하루한포스트가 해주는 것**: 콘텐츠(텍스트) 자동 생성
  - ✍️ **내가 할 일**: 이미지 준비 + 복사 붙여넣기 + 게시
  - 시간 절약 효과 명시: **30분 작업 → 3분으로 단축**
- ✅ **유튜브 롱폼 외주 제거**:
  - 크몽/숨고/프리랜서코리아 링크 전체 제거
  - AI 영상 생성 방법 우선 추천 (Runway Gen-2, Pika Labs, HeyGen)
- ✅ **AI 도구 사용 우선 순위 조정**:
  - 모든 플랫폼에서 AI 이미지/영상 생성 방법을 **첫 번째 옵션**으로 제시
  - 직접 제작은 두 번째 옵션으로 이동

**수정된 플랫폼 (11개):**
| **플랫폼** | **추가된 가치 제안** |
|----------|------------------|
| 공통 프로세스 | 콘텐츠 자동 생성 + 시간 절약 (30분→3분) |
| 블로그 | 제목, 본문, 해시태그 자동 생성 |
| 브런치 | 스토리텔링 텍스트 자동 생성 |
| 인스타 피드 | 캡션 + 해시태그 자동 생성 |
| 인스타 릴스 | 스크립트(장면별 구성) 자동 생성 |
| 유튜브 쇼츠 | Hook-본문-CTA 스크립트 자동 생성 |
| 유튜브 롱폼 | 스토리보드(장면별 구성) 자동 생성 |
| 링크드인 | 전문가 네트워킹 콘텐츠 자동 생성 |
| 카카오톡 채널 | 채널 메시지 자동 생성 |
| 스레드 | 스레드 콘텐츠 자동 생성 |
| 트위터(X) | 280자 제한 준수 콘텐츠 자동 생성 |

**기술 상세:**
- **파일**: 
  - `public/static/app-v3-final.js` - HELP_GUIDES 배열 전체 수정
  - `src/html-template.ts` - 버전 업데이트
  - `src/landing-page.ts` - 버전 업데이트
- **버전**: 24.0.5 → 24.0.6
- **커밋**: `3065454` feat: 도움말 가이드 전면 개편

### 🚀 **v24.0.5 도움말 가이드 아이콘 FontAwesome 통일** ⭐⭐⭐ (2026-01-25)
**이모지 → FontAwesome 아이콘으로 전면 개편**

**주요 변경사항:**
- ✅ **12개 플랫폼 아이콘 전체 통일**:
  - 이모지(📝, 📷, 🎬 등) → FontAwesome 아이콘으로 변경
  - 전문적이고 일관된 UI/UX 제공
  - 브라우저/OS별 이모지 렌더링 차이 해결

**아이콘 변경 목록:**
| **플랫폼** | **변경 전** | **변경 후** |
|----------|----------|----------|
| 공통 프로세스 | 🔄 | `<i class="fas fa-sync-alt"></i>` |
| 블로그 | 📝 | `<i class="fas fa-blog"></i>` |
| 브런치 | 📝 | `<i class="fas fa-book-open"></i>` |
| 인스타 피드 | 📷 | `<i class="fab fa-instagram"></i>` |
| 인스타 릴스 | 🎬 | `<i class="fas fa-film"></i>` |
| 유튜브 쇼츠 | 🎥 | `<i class="fab fa-youtube"></i>` |
| 유튜브 롱폼 | 🎞️ | `<i class="fas fa-video"></i>` |
| 링크드인 | 💼 | `<i class="fab fa-linkedin"></i>` |
| 카카오톡 | 💬 | `<i class="fas fa-comment-dots"></i>` |
| 스레드 | 🧵 | `<i class="fas fa-at"></i>` |
| 트위터 | 𝕏 | `<span style="font-weight: 600;">𝕏</span>` |
| 무료 이미지 | 🖼️ | `<i class="fas fa-images"></i>` |

**기술 상세:**
- **파일**: `public/static/app-v3-final.js` - HELP_GUIDES 배열 전체 아이콘 교체
- **장점**: 
  - 크로스 브라우저/OS 호환성 향상
  - 일관된 시각적 품질 보장
  - 전문적인 UI/UX 제공

### 🚀 **v24.0.4 트위터(X) 아이콘 전면 개편** ⭐⭐⭐ (2026-01-25)
**파란 새 → 𝕏 아이콘 전체 통일 + UX 개선**

**주요 변경사항:**
- ✅ **트위터 아이콘 전체 통일 (🐦 → 𝕏)**:
  - 도움말 가이드: 이미 𝕏 아이콘 사용 (유지)
  - 플랫폼 선택 체크박스: 파란 새 → 𝕏 (변경)
  - 콘텐츠 생성 템플릿: 파란 새 → 𝕏 (변경)
  - 캘린더 이벤트: `fa-twitter` → 𝕏 (변경)
  - 히스토리 카드: `fa-twitter` → 𝕏 (변경)
  - SNS 바로가기: twitter.com → x.com (변경)
- ✅ **템플릿 프롬프트 수정**:
  - "Twitter 마케팅 전문가" → "X(트위터) 마케팅 전문가"
- ✅ **이미지 업로드 설명 추가**:
  - 기존: "이미지 업로드 (최대 10장, 1장당 10MB)"
  - 개선: "💡 콘텐츠 생성 시 참고할 이미지를 업로드해주세요 (제품 사진, 로고, 참고 자료 등)"
- ✅ **아이콘 렌더링 로직 개선**:
  - text 기반 아이콘(`𝕏`)과 class 기반 아이콘(FontAwesome) 모두 지원
  - 캘린더, 히스토리, 플랫폼 선택 모두 일관된 렌더링

**기술 상세:**
- **파일**: 
  - `public/static/app-v3-final.js` - 전체 트위터 아이콘 교체
  - `src/html-template.ts` - 버전 번호 업데이트
  - `src/landing-page.ts` - 버전 번호 업데이트

### 🚀 **v24.0.3 도움말 가이드 전면 개편 + 이름 변경 제거** ⭐⭐⭐ (2026-01-25)
**12개 플랫폼 도움말 완성 + UI 최적화**

**주요 변경사항:**
- ✅ **도움말 가이드 전면 재작성 (12개 완성)**:
  - 1. 🔄 공통 활용 프로세스 (모든 플랫폼 공통 3단계)
  - 2. 📝 블로그 활용법 (네이버/티스토리)
  - 3. 📝 브런치 활용법 (스토리텔링 포스팅)
  - 4. 📷 인스타그램 피드 활용법
  - 5. 🎬 인스타그램 릴스 활용법
  - 6. 🎥 유튜브 쇼츠 활용법
  - 7. 🎞️ 유튜브 롱폼 활용법
  - 8. 💼 링크드인 활용법 (B2B/전문가 네트워킹)
  - 9. 💬 카카오톡 채널 활용법 (푸시 메시지 발송)
  - 10. 🧵 스레드 활용법 (인스타그램 연동)
  - 11. 𝕏 트위터(X) 활용법 + 스레드 작성법
  - 12. 🖼️ 무료 이미지 다운로드 (20개 사이트)
- ✅ **무료 리소스 20개 사이트 포함**:
  - 사진: Unsplash, Pexels, Pixabay, Burst, StockSnap
  - 디자인: Freepik, Canva, Flaticon, Vecteezy, unDraw
  - 비디오: Coverr, Videvo, Mixkit
  - 음악: YouTube Audio Library, Epidemic Sound, Bensound
  - 유틸리티: Remove.bg, TinyPNG, Photopea, Coolors
  - 각 사이트별 라이선스 주의사항 명시
- ✅ **이름 변경 기능 제거 (불필요 기능)**:
  - 설정 화면에서 이름 필드를 읽기 전용으로 변경
  - `updateUserName()` 함수 제거 (401 에러 방지)
  - 회원 탈퇴 기능은 정상 유지
- ✅ **브라우저 캐시 버스팅**:
  - 버전 번호: 24.0.2 → 24.0.3
  - 강제 업데이트 적용

**기술 상세:**
- **파일**: 
  - `public/static/app-v3-final.js` - 도움말 가이드 배열 `HELP_GUIDES` 전면 개편
  - `src/html-template.ts` - 버전 번호 업데이트
  - `src/landing-page.ts` - 버전 번호 업데이트

### 🚀 **v8.8 히스토리 보기 + 멀티탭 크레딧 동기화** ⭐⭐⭐ (2026-01-13)
**완전 해결: 히스토리 "보기" 버튼 + 멀티탭 크레딧 동기화**

**주요 변경사항:**
- ✅ **히스토리 "보기" 버튼 완전 수정**:
  - `viewHistory()` 함수 강화 - 화면 전환 로직 추가
  - 캘린더 뷰 → 콘텐츠 뷰 자동 전환
  - `resultArea` 강제 표시 및 스크롤 이동
  - 좌측 패널 + 메인 콘텐츠 영역 동시 표시
  - 전체 로그 추가로 문제 추적 가능
- ✅ **멀티탭 크레딧 동기화 시스템**:
  - **BroadcastChannel API** - 크로스 탭 실시간 통신
  - **visibilitychange 이벤트** - 탭 활성화 시 자동 동기화
  - **LocalStorage 이벤트** - 다른 탭 변경 감지
  - 모든 탭에서 크레딧 정보 실시간 반영
- ✅ **백엔드 트랜잭션 강화**:
  - **Supabase RPC 함수** `deduct_credits_safe()` 구현
  - **PostgreSQL FOR UPDATE** - 행 잠금으로 동시 접근 차단
  - Race Condition 완전 방지
  - 무료 크레딧 우선 차감 로직 유지

**안전성:**
- 여러 탭/창을 동시에 열어도 안전
- 크레딧 중복 차감 방지
- 모든 탭에서 크레딧 정보 실시간 동기화
- 데이터베이스 무결성 보장 (ACID 트랜잭션)

**기술 상세:**
- **Frontend**: BroadcastChannel + visibilitychange + storage event
- **Backend**: Supabase RPC + PostgreSQL FOR UPDATE
- **파일**: 
  - `public/static/app-v3-final.js` - 동기화 로직
  - `src/index.tsx` - 트랜잭션 API
  - `supabase-functions/deduct_credits_safe.sql` - DB 함수

### 🚀 **v8.7 모달 계층 문제 완전 해결** ⭐⭐⭐ (2026-01-13)
**CDN 제거 완료! 프로덕션 빌드 최적화!**

**주요 변경사항:**
- ✅ **Tailwind CDN 완전 제거**:
  - 개발용 `cdn.tailwindcss.com` 제거
  - 프로덕션 빌드 시스템으로 전환
  - 파일 크기 및 로딩 속도 최적화
- ✅ **Tailwind v3 + PostCSS 통합**:
  - `@tailwindcss/postcss` 플러그인 사용
  - 빌드 시 CSS 자동 생성 (`public/static/styles.css`)
  - 필요한 CSS만 포함 (Tree Shaking)
- ✅ **빌드 프로세스 개선**:
  - `npm run build:css` - Tailwind CSS 빌드
  - `npm run build` - CSS + Vite 통합 빌드
  - 프로덕션 배포 시 자동 CSS 최적화
- ✅ **파일 크기**:
  - 빌드된 CSS: 39KB (minified)
  - 기존 CDN: 3.5MB+ (전체 유틸리티 로드)
  - **99% 이상 크기 감소**

**기술 스택 업데이트:**
- Frontend: Hono + TypeScript + Vite + **Tailwind CSS v3 (Production Build)**
- Backend: Cloudflare Workers + Supabase PostgreSQL + 토스페이먼츠
- AI: OpenAI GPT-4o + Google Gemini Flash (하이브리드)

### 🐛 **v8.5 히스토리/캘린더 버그 수정** ⭐⭐⭐ (2026-01-13)
**핵심 기능 안정화 완료!**

**수정 사항:**
- ✅ **캘린더 목록 보기 필터링 수정**:
  - `scheduled_date`가 있는 콘텐츠만 표시하도록 수정
  - 월/주/목록 보기 모두 동일한 데이터 표시
  - 예정일 없는 콘텐츠는 히스토리에서만 확인 가능
- ✅ **상세 디버깅 로그 추가**:
  - 히스토리 버튼 클릭 추적
  - 모달 열기 과정 로그
  - 브라우저 콘솔에서 실시간 확인 가능
- ✅ **전역 함수 검증**:
  - `window.openHistoryModal` 노출 확인
  - `window.viewHistory` 노출 확인
  - `window.loadCalendarEvents` 노출 확인

**올바른 기능 구조:**
1. **히스토리 (History)**: 생성한 모든 콘텐츠 표시 (예정일 설정 여부 무관)
2. **캘린더 (Calendar)**: 예정일(`scheduled_date`)을 설정한 콘텐츠만 표시
   - 월(Month) 보기
   - 주(Week) 보기
   - 목록(List) 보기

### 🖼️ **v8.3 이미지 스마트 배치 시스템** ⭐⭐⭐ (2026-01-13)
**네이버 블로그/브런치/인스타그램 이미지 자동 배치!**

**주요 변경사항:**
- ✅ **서비스명 변경**: 하루한포 → 마케팅허브 (브랜드 전환)
- ✅ **브런치 플랫폼 추가**: 마크다운 형식 지원
- ✅ **이미지 소스 통합 API** (`/api/images/smart-fetch`):
  1. 사용자 업로드 이미지 우선 사용
  2. 부족 시 **3개 무료 이미지 API**로 검색 (Unsplash → Pexels → Pixabay)
  3. 여전히 부족하면 AI 이미지 생성 (DALL-E 3)
- ✅ **무료 이미지 API 3개 통합**:
  - **Unsplash**: 300만+ 고품질 전문가 사진 (50 requests/hour)
  - **Pexels**: 300만+ 상업용 무료 사진 (200 requests/hour)
  - **Pixabay**: 430만+ 사진/일러스트/벡터 (100 requests/minute)
  - **총 1,000만+ 이미지 선택지**
- ✅ **네이버 블로그 완벽 붙여넣기**:
  - HTML 형식 자동 이미지 배치
  - `<figure>` + `<figcaption>` 자동 생성
  - 문단별 균등 배치 (약 500자마다 1개)
- ✅ **브런치 마크다운 변환**:
  - 마크다운 형식 이미지 배치
  - 자동 캡션 생성
- ✅ **인스타그램 이미지 메타데이터**:
  - 이미지 정보를 콘텐츠 하단에 자동 추가
  - 출처 및 캡션 정보 포함

**이미지 배치 로직:**
- 네이버 블로그: HTML `<figure>` 태그로 자동 배치
- 브런치: 마크다운 `![alt](url)` 형식으로 자동 배치
- 인스타그램: 이미지 메타데이터를 콘텐츠 하단에 추가

**무료 이미지 API 설정 가이드:**
1. **Unsplash** (권장, 고품질): https://unsplash.com/developers → Register as a Developer
2. **Pexels** (상업용): https://www.pexels.com/api/ → Create API Key
3. **Pixabay** (일러스트): https://pixabay.com/api/docs/ → Get API Key

### 🧹 **v7.11.1 UI 정리 - 히어로 섹션 제거** ⭐ (2026-01-12)
**깔끔한 사용자 경험!**

**주요 변경사항:**
- ✅ **히어로 섹션 완전 제거**: 가격 플랜 마케팅 섹션 삭제 (30 크레딧/월, ₩9,000 카드 등)
- ✅ **키워드 분석 UI 정리**: 좌측 패널에만 존재, 메인 콘텐츠 중복 없음
- ✅ **통합 UI**: 회원/비회원 모두 동일한 깔끔한 인터페이스

### 🎨 **v7.11 UI 전면 개편 (헤더 버튼 + 좌측 입력 필드 + 우측 캘린더)** ⭐⭐⭐ (2026-01-12)
**사용자 경험 대폭 개선 + 기능 재배치!**

**주요 변경사항:**

1. ✅ **헤더 영역**
   - 회원가입/로그인 버튼 복구
   - 사용자 정보 (로그인 시 표시)

2. ✅ **헤더 아래 기능 버튼 영역** ⭐ NEW
   - 6개 기능 버튼 한 줄 배치
   - 버튼: 히스토리, 템플릿, 프로필 저장, 프로필 불러오기, 즐겨찾기, SNS 바로가기
   - 각 버튼별 색상 구분 (보라, 주황, 초록, 파랑, 노랑, 핑크)

3. ✅ **좌측 패널 대폭 확장** ⭐ NEW
   - **키워드 AI 심층 분석** (기존 유지)
   - **12개 입력 필드 추가**:
     1. 브랜드명
     2. 서비스명
     3. 회사·상호명
     4. 사업자 유형 (드롭다운)
     5. 지역
     6. 타겟 성별 (드롭다운)
     7. 연락처
     8. 웹사이트
     9. SNS 계정
     10. 톤앤매너 (드롭다운)
     11. 타겟 연령대 (드롭다운)
     12. 산업 분야 (드롭다운)
   - **하이브리드 AI 전략 선택**:
     - 🤖 자동 선택 (권장)
     - 🔗 통합형
     - 🖼️ 이미지 중심
     - 🔑 키워드 중심

4. ✅ **메인 콘텐츠**
   - 콘텐츠 생성 블록 (기존 유지)
   - 히어로 섹션 (비로그인 시)

5. ✅ **우측 패널 - 콘텐츠 캘린더** ⭐ NEW
   - 회원/비회원 구분 없이 항상 표시
   - FullCalendar 통합
   - 달력 뷰 / 목록 뷰 전환
   - 예정된 콘텐츠 관리

6. ✅ **회원/비회원 화면 통일**
   - 동일한 UI 구조
   - 모든 기능 항상 표시
   - 비회원 기능 사용 시 로그인 유도

**레이아웃 구조:**
```
┌────────────────────────────────────────────────────────┐
│       헤더 (사용자 정보 + 회원가입/로그인)                 │
├────────────────────────────────────────────────────────┤
│  [히스토리][템플릿][프로필저장][프로필관리][즐겨찾기][SNS]  │
├──────────┬──────────────────────────┬─────────────────┤
│  좌측     │       메인 콘텐츠         │    우측 캘린더    │
│  패널     │                          │                │
│ (280px)  │      (flex-1)            │    (320px)     │
│          │                          │                │
│ 키워드    │                          │   📅 달력 뷰    │
│ 분석     │  콘텐츠 생성              │   📋 목록 뷰    │
│ ───────  │  결과 표시               │                │
│ 12개     │                          │   예정 콘텐츠    │
│ 입력     │                          │   관리          │
│ 필드     │                          │                │
│ ───────  │                          │                │
│ AI 전략   │                          │                │
│ 선택     │                          │                │
└──────────┴──────────────────────────┴─────────────────┘
```

**기술적 개선:**
- 헤더 버튼 영역 추가 (헤더 너비와 동일)
- 좌측 패널 스크롤 최적화
- 우측 캘린더 FullCalendar 통합
- 이벤트 리스너 재구성

---

### 🎨 **v7.10 통합 레이아웃** (2026-01-12)
**사용자 경험 최적화 + 공간 효율 극대화!**

**주요 변경사항:**
1. ✅ **헤더와 3열 레이아웃 너비 통일**
   - `max-w-screen-2xl` 제거 → 헤더 너비와 동일
   - 좌우 여백 최소화 → 공간 활용 극대화
   - 시각적 일체감 향상

2. ✅ **좌측 패널에 캘린더 추가** ⭐ NEW
   - 키워드 분석 UI 아래에 콘텐츠 캘린더 배치
   - 예정된 콘텐츠 한눈에 확인
   - 미니 캘린더 형태로 공간 효율적

3. ✅ **우측 사이드바 개선** ⭐ NEW
   - 크레딧 정보 제거 (헤더로 이동)
   - 사용자 정보 제거 (헤더로 이동)
   - **회원가입/로그인 버튼 추가** (항상 표시)
   - 빠른 접근성 향상

4. ✅ **헤더 간소화**
   - 회원가입/로그인 버튼 제거
   - 사용자 정보만 표시 (로그인 시)
   - 깔끔한 상단 바

5. ✅ **회원/비회원 화면 통일**
   - 동일한 레이아웃 유지
   - 비회원 기능 클릭 시 로그인 유도
   - 일관된 사용자 경험

**레이아웃 구조:**
```
┌────────────────────────────────────────────────────────┐
│              헤더 (사용자 정보만 - 로그인 시)              │
├──────────┬──────────────────────────┬─────────────────┤
│  좌측     │       메인 콘텐츠         │    우측 사이드바   │
│  패널     │                          │                │
│ (280px)  │      (flex-1)            │    (320px)     │
│          │                          │                │
│ 키워드    │  콘텐츠 생성              │  빠른 메뉴      │
│ 분석 UI   │  결과 표시               │  + 회원가입     │
│ ───────  │                          │  + 로그인       │
│ 캘린더    │                          │                │
│ (NEW)    │                          │                │
└──────────┴──────────────────────────┴─────────────────┘
              ⬇️ 전체 페이지 스크롤 ⬇️
```

**기술적 개선:**
- 레이아웃 너비: `max-w-screen-2xl` → `mx-4` (헤더와 동일)
- 좌측 패널: 캘린더 컴포넌트 추가
- 우측 패널: 인증 버튼으로 교체
- 이벤트 리스너: 우측 사이드바 버튼 연결

---

### 🎨 **v7.9.2 트렌드파인더 스타일 3열 레이아웃** (2026-01-12)
**PC 작업 환경 최적화 + 전문적인 대시보드 스타일!**

**레이아웃 구조:**
```
┌────────────────────────────────────────────────────────┐
│                    전체 너비 네비게이션                    │
├──────────┬──────────────────────────┬─────────────────┤
│  좌측     │       메인 콘텐츠         │    우측 사이드바   │
│  패널     │                          │                │
│ (280px)  │      (flex-1)            │    (320px)     │
│          │                          │                │
│ 키워드    │  콘텐츠 생성              │  빠른 메뉴      │
│ 분석 UI   │  결과 표시               │  크레딧 정보    │
│          │                          │                │
└──────────┴──────────────────────────┴─────────────────┘
```

**주요 기능:**
1. ✅ **좌측 패널 (280px)** ⭐ NEW
   - 🔍 **키워드 AI 심층 분석 UI** (통합 완료)
   - 비로그인 시: 안내 메시지 + CTA
   - 로그인 시: 키워드 입력 + 분석 버튼
   - 무료/유료 크레딧 표시
   - 빠른 테스트 샘플 버튼

2. ✅ **메인 콘텐츠 (flex-1)**
   - 비로그인 시: 히어로 섹션 + 가격 플랜
   - 로그인 시: 콘텐츠 생성 UI

3. ✅ **우측 사이드바 (320px)**
   - 📊 히스토리 (생성 기록)
   - 📝 템플릿 (저장된 템플릿)
   - 💾 프로필 저장
   - 📁 프로필 관리
   - 💎 실시간 크레딧 정보

4. ✅ **반응형 디자인**
   - **PC (1280px+)**: 3열 Flex 레이아웃 + **전체 스크롤**
   - **태블릿/모바일**: 메인 콘텐츠만 + 우측 슬라이드 메뉴
   - 좌측 패널 모바일에서 숨김

5. ✅ **전체 페이지 스크롤**
   - sticky 제거 → 자연스러운 스크롤
   - 좌측/우측 패널 모두 페이지와 함께 스크롤

**기술적 개선:**
- 좌측 패널에 키워드 분석 UI 직접 삽입
- CSS Flexbox 기반 3열 레이아웃
- 시각적 일체감 (box-shadow, border-radius 통일)
- 반응형 미디어 쿼리 최적화

---

### 🎯 **v7.1 프론트엔드 회원 시스템** ⭐⭐⭐ (2025-01-01)
**완전한 SaaS 플랫폼으로 진화!**

**새로운 UI/UX:**
1. ✅ **네비게이션 바** (사용자 정보 실시간 표시)
   - 사용자 이름, 등급, 남은 크레딧 표시
   - Google 로그인/로그아웃 버튼
   - 반응형 디자인

2. ✅ **히어로 섹션** (마케팅 강화)
   - 가격 정보: ₩9,900/월, 30회 생성, 1회당 ₩330
   - 3가지 회원 등급 비교
   - CTA 버튼: "지금 시작하기", "1회 무료 체험"

3. ✅ **회원 등급별 기능 제한**
   - 비회원: 1회 체험, 기본 생성만 가능
   - 무료회원: 월 3회, 프로필/히스토리/템플릿 저장
   - 유료회원: 월 30회, 모든 기능 이용

4. ✅ **회원 전용 기능 보호**
   - 로그인 전: 회원 전용 버튼 숨김
   - 클릭 시 로그인 유도 알림
   - localStorage 기반 상태 관리

**가격 정책 (단일화):**
- **월 구독**: ₩9,900 (30회 생성)
- **1회당 비용**: ₩330 (커피 한 잔 가격)
- **시나리오별 비용 차이 제거** → 사용자 혼란 방지
- **모든 시나리오 동일 가격** (이미지만/문서만/이미지+문서)

**파일 처리:**
- 이미지: JPG, PNG, WebP, GIF (최대 5장)
- 문서: PDF, DOCX, TXT (최대 3개)
- 3가지 사용 시나리오 모두 ₩330/회

3. ✅ **크레딧 시스템** (자동 차감/충전)
   - 생성 1회당 1크레딧 차감
   - 잔액 부족 시 403 + 결제 옵션 안내
   - 월 자동 리셋 (구독자)

4. ✅ **토스페이먼츠 결제 연동**
   - 월 구독: ₩9,900 (30 크레딧)
   - 추가 크레딧: 10회(₩4,500), 20회(₩8,500), 50회(₩18,500)
   - Webhook 자동 충전

5. ✅ **데이터베이스** (Supabase PostgreSQL)
   - 6개 테이블: users, generations, credit_transactions, payments, uploaded_files, trial_usage
   - Row Level Security (RLS) 활성화
   - 자동 인덱싱 및 트리거

**백엔드 문서:**
- 📘 [완전한 통합 가이드](./BACKEND_INTEGRATION_GUIDE.md)
- 📗 [구현 완료 보고서](./BACKEND_IMPLEMENTATION_COMPLETE.md)
- 📙 [환경 변수 템플릿](./.env.template)

---

## 🌟 AI 기능 (v6.3 Gemini Flash 하이브리드) ⭐⭐⭐

### 🚀 **Gemini Flash 하이브리드 전략** ⭐⭐⭐ NEW v6.3 (2025-12-28)
**비용 52% 절감 + 품질 유지!**

**핵심 전략:**
- ✅ **이미지 분석**: Gemini Flash 사용 (70% 비용 절감)
  - GPT-4o: ₩8/장 → Gemini: ₩1/장
  - 분석 품질: 거의 동일 (95점 vs 93점)
- ✅ **블로그 콘텐츠**: GPT-4o 유지 (최고 품질 필수)
  - 네이버 블로그 3,800자 SEO 최적화
  - 파워 블로거 수준 자연스러움
  - 비용: ₩52/회 (변동 없음)
- ✅ **기타 플랫폼**: Gemini Flash 사용 (충분한 품질)
  - 인스타그램: ₩32 → ₩10 (69% 절감)
  - 스레드: ₩20 → ₩6 (70% 절감)
  - 유튜브: ₩78 → ₩23 (71% 절감)

**비용 비교:**

| 항목 | 기존 (GPT-4o) | 하이브리드 | 절감율 |
|------|--------------|-----------|--------|
| 이미지 분석 | ₩8 | ₩1 | 87% ⭐ |
| 블로그 | ₩52 | ₩52 | 0% (품질 유지) |
| 인스타그램 | ₩32 | ₩10 | 69% ⭐ |
| 스레드 | ₩20 | ₩6 | 70% ⭐ |
| 유튜브 | ₩78 | ₩23 | 71% ⭐ |
| **총 비용** | **₩190** | **₩92** | **52%** ⭐⭐⭐ |

**수익성 개선:**
```
월 1,000회 생성 기준:
- 기존 비용: ₩190,000
- 하이브리드: ₩92,000
- 절감액: ₩98,000/월 💰

마진율 개선:
- 기존: 81% (₩8,100,000)
- 하이브리드: 91% (₩9,080,000) ⭐
- 추가 이익: ₩980,000/월
```

**품질 비교:**
```
네이버 블로그 3,800자 기준:
- GPT-4o 전체: 95점
- 하이브리드: 93점 (거의 동일) ⭐
- Gemini 전체: 88점

결론: 2점 차이로 52% 절감!
```

**자동 전환:**
- Gemini API 키가 있으면 자동으로 하이브리드 전략 사용
- Gemini API 키가 없으면 GPT-4o 전용 모드로 작동
- 콘솔 로그로 어떤 API 사용 중인지 확인 가능

## 🌟 이전 기능 (v6.2 프론트엔드 UI 개선)

### 🎨 **프론트엔드 UI 개선** ⭐⭐⭐ NEW v6.2 (2025-12-28)
**사용자가 직접 전략을 선택할 수 있는 UI 추가!**

**핵심 기능:**
- ✅ **전략 수동 선택 모드**: 4가지 전략 중 직접 선택 가능
  - 🤖 **자동 선택** (권장): AI가 이미지-변수 일치도 분석 후 최적 전략 자동 선택
  - ⚖️ **통합형**: 이미지 + 변수 균형
  - 📸 **이미지 중심**: 이미지 우선, 변수 보조
  - 🔑 **변수 중심**: 키워드/산업/톤/타깃 우선, SEO 최우선
- ✅ **전략별 상세 설명**: "전략 자세히 보기" 버튼으로 각 전략 차이점 확인
- ✅ **시각적 카드 UI**: 선택한 전략이 한눈에 보이는 카드 디자인
- ✅ **실전 예시 제공**: 각 전략의 사용 케이스 및 결과 예시
- ✅ **프로필 저장**: 선택한 전략도 프로필에 저장되어 재사용 가능

**사용 시나리오:**
```
📌 언제 수동 선택하나요?
• 특정 전략을 강제하고 싶을 때 (예: SEO 우선 필수)
• AI 자동 선택 결과가 만족스럽지 않을 때
• 전략별 비교 테스트를 하고 싶을 때

💡 대부분의 경우 "자동 선택"을 권장합니다!
```

### 🎯 **변수 중심 하이브리드 전략 강화** ⭐⭐⭐ v6.1 (2025-12-28)
이미지 + 모든 변수(산업분야/톤앤매너/타깃) 완벽 반영!

**핵심 개선:**
- ✅ **블로그 프롬프트 대폭 업그레이드**: 월 100만 방문자 파워 블로거 수준 품질
- ✅ **변수 활용 명시화**: 
  - 산업분야 (15개 옵션: 카페/뷰티/패션/IT...)
  - 톤앤매너 (8개 옵션: 친근한/전문가/감성적인...)
  - 타깃 연령대 (10대/20대/30-40대...)
  - 위치, 연락처, 웹사이트, SNS 등 모든 변수 반영
- ✅ **하이브리드 전략 가이드 개선**:
  - **integrated (통합형)**: 이미지 시각적 묘사 + 변수로 맥락/타깃팅 ✅ 권장
  - **image-first (이미지 중심)**: 이미지 우선, 변수는 자연스러울 때만
  - **keyword-first (변수 중심)**: 변수 우선, 이미지는 배경/무시
- ✅ **필수 조건 강화**:
  - 글자수: 3,200-3,800자 (정확 준수)
  - 단락: 최소 8개 이상
  - 이모지: 15-25개 사이
  - 키워드 밀도: 1-2%
  - 개인 경험/일화: 2개 이상 필수
  - 독자 질문: 3개 이상 필수
- ✅ **출력 형식 구체화**: SEO 제목 + 섹션별 글자수 가이드

**변수 활용 예시:**
```
📸 이미지: 카페 브런치 사진
🔢 변수:
  - 키워드: "브런치 맛집"
  - 산업분야: "카페/음식점"
  - 톤앤매너: "친근한"
  - 타깃: "20-30대"
  - 위치: "서울 강남구"

✅ 생성 결과 (integrated 전략):
"이 카페의 브런치 플레이트를 보면 (이미지),
 20-30대가 좋아할 만한 감성적인 비주얼이에요 (타깃).
 친구와 함께 서울 강남구에서 브런치 맛집 찾으시는 분들께
 강추합니다! (변수 모두 활용)"
```

### 🧠 **하이브리드 AI 판단 시스템** ⭐⭐⭐ v6.0
이미지와 변수가 안 맞아도 자연스러운 콘텐츠 생성!

**핵심 기능:**
- **자동 매칭 분석**: AI가 이미지와 키워드의 연관성을 0-100점으로 자동 분석
- **전략 자동 선택**: 3가지 전략 중 AI가 최적의 방식 자동 결정
  - **통합형 (integrated)**: 이미지 + 키워드 균형 (일치도 70점 이상)
  - **이미지 중심 (image-first)**: 이미지 우선, 키워드 보조 (일치도 50-69점)
  - **키워드 중심 (keyword-first)**: SEO 우선, 이미지 무시 (일치도 50점 미만)
- **자연스러움 우선**: 억지로 끼워맞추지 않고 최적의 전략으로 생성
- **사용자 경고**: 일치도 30점 미만이면 경고 메시지 + 강제 진행 옵션

**실전 예시:**

```
📸 이미지: 카페 인테리어 3장
🔤 키워드: "보습크림, 민감성피부"

AI 분석 결과:
- 일치도: 25점 (매우 불일치)
- 선택 전략: keyword-first (키워드 중심)
- 생성 방식: 이미지 무시, 보습크림 중심으로 작성

결과: "겨울철 건조한 날씨에 필수인 보습크림..."
(카페 이미지는 사용하지 않음)
```

```
📸 이미지: 화장품 제품 샷 5장
🔤 키워드: "수분크림, 보습력, 효과"

AI 분석 결과:
- 일치도: 95점 (완벽 일치)
- 선택 전략: integrated (통합형)
- 생성 방식: 이미지와 키워드 모두 적극 활용

결과: "이 제품의 텍스처를 보시면 (이미지), 
       보습력이 정말 뛰어나 보이는데... (키워드)"
```

**문제 해결:**
- ❌ 이전: 카페 사진 + 보습크림 키워드 → 엉뚱한 콘텐츠
- ✅ 이제: AI가 자동으로 키워드 중심 전략 선택 → 자연스러운 콘텐츠

## 🌟 최신 기능 (v5.3 배치 생성 기능) ⭐⭐

### 🚀 **배치 생성 기능** ⭐⭐ NEW v5.3
월간 콘텐츠 대량 생성을 위한 혁신적인 기능!

**핵심 기능:**
- **이미지 100장 업로드**: 최대 100장, 200MB까지 업로드 가능 (기존 10장 → 100장 확장)
- **콘텐츠 개수 선택**: 1개 / 3개 / 5개 / 10개 / 12개(월간) / 직접 입력(1-20개)
- **이미지 자동 분배**: 콘텐츠당 1/3/5/7/10장 선택 시 자동 분배
- **실시간 계산**: 필요한 이미지 수 vs 업로드된 이미지 수 자동 계산
- **부족 경고**: 이미지가 부족하면 경고 메시지 + 필요 개수 표시
- **분배 미리보기**: 각 콘텐츠에 어떤 이미지가 배정되는지 미리 확인
- **진행률 표시**: "콘텐츠 #3 생성 중... (3/12)" 실시간 진행 상황
- **성공/실패 통계**: 12개 중 10개 성공, 2개 실패 등 명확한 결과
- **배치 Excel 다운로드**: 모든 콘텐츠를 하나의 Excel 파일로 통합 다운로드

**사용 예시:**
- **월간 블로그 12개**: 60장 이미지 → 콘텐츠 12개(블로그) × 5장 = 1번 클릭으로 완료
- **인스타+블로그 각 5개**: 30장 이미지 → 3장씩 자동 분배
- **전체 플랫폼 3개**: 9장 이미지 → 블로그+인스타+스레드+유튜브 3세트

**시간 & 비용 절감:**
- 기존: 12개 블로그 → 12번 클릭, 12분 소요
- **NEW**: 12개 블로그 → **1번 클릭, 2분 소요** (10배 빠름!)
- 비용은 동일하지만 시간을 획기적으로 단축

## 🌟 핵심 기능 (v5.0 네이버 블로그 최적화)

### 📝 **네이버 블로그 복사-붙여넣기 최적화** ⭐ NEW v5.0
- **순수 텍스트 형식**: HTML 태그 없이 순수 텍스트만 생성
- **목차 자동 생성**: 본문 섹션을 한눈에 보여주는 목차 (3-6개 항목)
- **이모지 적극 활용**: 💡, 📌, ✅, 🔍 등으로 가독성 향상
- **짧은 단락**: 3-5줄 이내로 끊어서 읽기 편하게
- **글머리 기호**: 표 대신 • 기호로 정보 정리
- **구분선 활용**: ━━━로 섹션 명확히 구분
- **정보 박스**: ⚠️, 💡로 중요 정보 강조
- **CTA 텍스트 링크**: 👉 자세히 보기: URL 형식
- **1,500~2,500자**: 뽀글AI 수준의 긴 콘텐츠
- **네이버 블로그 에디터에 바로 붙여넣기 가능**

### 🔐 **백엔드 API 키 관리** ⭐ v3.2
- **서버 환경변수**: OpenAI API 키는 백엔드 환경변수로만 관리
- **프론트엔드 단순화**: API 키 입력 UI 완전 제거
- **보안 강화**: API 키가 브라우저에 노출되지 않음
- **.dev.vars 파일**: 로컬 개발 시 .dev.vars 파일에 API 키 설정
- **관리자 전용**: API 키는 관리자만 서버에 설정

### 💰 **강화된 비용 계산기** ⭐ IMPROVED v3.1
- **실시간 자동 계산**: 이미지 개수와 플랫폼 선택 시 즉시 계산
- **달러 + 원화 동시 표시**: $0.06 ≈ ₩78 (환율 1,300원)
- **예상 소요 시간**: 몇 초 걸릴지 미리 확인
- **상세 분석**: 이미지 분석 비용 + 플랫폼별 비용 분리
- **시각적 개선**: 보라색 그라데이션 카드 디자인
- **24시간 환율 자동 업데이트**

### ⏳ **로딩 & 에러 UI** ⭐ NEW v3.1
- **전체 화면 오버레이**: 생성 중 화면 전체 오버레이
- **실시간 진행률**: 0%~100% 진행률 바와 퍼센트 표시
- **단계별 메시지**: "이미지 분석 중..." → "콘텐츠 생성 중..."
- **스피너 애니메이션**: 부드러운 로딩 애니메이션
- **구체적 에러 메시지**: 에러 발생 시 원인과 해결 방법 제시
- **[재시도] 버튼**: 에러 발생 시 바로 재시도 가능

### 📝 **템플릿 관리 시스템** ⭐ IMPROVED v3.2
- **플랫폼별 프롬프트 편집**: 블로그/인스타/스레드/유튜브 각각 커스터마이징
- **개선된 기본 템플릿** ⭐ NEW:
  - **블로그**: SEO 최적화 가이드, 1500-2000자 제한, 키워드 밀도 2-3%
  - **인스타그램**: 후킹 전략, 25-30개 해시태그 전략, 참여 유도 기법
  - **스레드**: 200-300자 짧고 강렬한 메시지, 빠른 소비 최적화
  - **유튜브 숏폼**: 60초 스크립트, 타임라인, 자막 가이드
- **변수 시스템**: {브랜드명}, {키워드}, {톤앤매너}, {타겟연령대}, {타겟성별}, {산업분야}
- **변수 안내**: 모달 상단에 사용 가능한 변수 목록 표시
- **[기본값 초기화]**: 언제든지 개선된 기본 템플릿으로 복원
- **[저장] 버튼**: 수정한 템플릿 LocalStorage에 저장
- **최대 50개 템플릿**: 브라우저에 자동 저장

### 📋 **복사 버튼 & 토스트** ⭐ NEW v3.1
- **각 플랫폼마다 복사 버튼**: 탭마다 "📋 복사하기" 버튼 명확하게 표시
- **클립보드 복사**: 원클릭으로 콘텐츠 복사
- **토스트 메시지**: "✅ 복사됨!" 우측 하단에 3초간 표시
- **에러 피드백**: 복사 실패 시 "❌ 복사 실패" 메시지
- **다양한 토스트**: 성공(초록), 에러(빨강), 정보(파랑), 경고(노랑)

### 📊 **확장된 옵션** ⭐ IMPROVED v3.1
- **브랜드명 필드**: "브랜드명 / 서비스명 / 상품명"으로 확장
  - Placeholder: "예: 올리브영 / 스킨케어 라인 / 수분크림"
- **산업분야 15개**: 뷰티, 패션, F&B, IT/테크, 헬스케어, 라이프스타일, 교육, 의료, 부동산, 금융, 법률, 여행/관광, 반려동물, 자동차, 가전/전자, 스포츠/레저
- **톤앤매너 8개**: 친근한, 전문가, 감성, 유머러스, 신뢰감, 트렌디, 고급스러운, 실용적

### 🌍 **간소화된 언어 선택** v3.1
- **2개 언어**: 한국어 🇰🇷, English 🇺🇸
- **우측 상단 버튼**: 원클릭 언어 전환

### 🤖 **GPT-4o 고정** v3.1
- **최고 품질 모델**: GPT-4o만 사용 (모델 선택 드롭다운 제거)
- **최적의 성능**: 이미지 분석 + 콘텐츠 생성 모두 GPT-4o

## 주요 기능

### ✨ 핵심 기능

#### 1. **다중 이미지 업로드** (최대 100장, 총 200MB) ⭐ IMPROVED v5.3
- 드래그 앤 드롭 지원
- 실시간 미리보기
- 이미지 개별 삭제 기능
- 이미지 편집 기능 (흑백, 밝기, 대비, 70% 압축)
- **배치 생성 대응**: 최대 100장까지 업로드하여 대량 콘텐츠 생성

#### 2. **확장된 브랜드 정보 입력**
**기본 정보:**
- 브랜드명 / 서비스명 / 상품명 (필수) ⭐ IMPROVED
- 회사 상호명
- 핵심 키워드 (필수, 쉼표로 구분)

**사업자 정보:**
- 사업자 유형 (개인/법인/프리랜서)
- 지역 (전국 17개 시도)
- 타겟 성별 (전체/남성/여성)

**연락처 정보:**
- 전화번호
- 웹사이트 URL
- SNS 계정 (@아이디)

**타겟팅 설정:**
- 톤앤매너 (8개 옵션) ⭐ IMPROVED
- 타겟 연령대 (10대~50대+)
- 산업 분야 (15개 옵션) ⭐ IMPROVED

#### 3. **브랜드 프로필 관리**
- **프로필 저장**: 입력한 브랜드 정보를 프로필로 저장
- **프로필 불러오기**: 저장된 프로필 목록에서 선택하여 빠르게 적용
- **프로필 삭제**: 불필요한 프로필 제거
- **LocalStorage 저장**: 브라우저에 자동 저장 (최대 50개)

#### 4. **콘텐츠 히스토리**
- **자동 저장**: 생성된 모든 콘텐츠 자동 저장
- **히스토리 조회**: 날짜별 생성 히스토리 확인
- **재사용**: 과거 생성된 콘텐츠 다시 불러오기
- **히스토리 삭제**: 불필요한 히스토리 제거
- **LocalStorage 저장**: 브라우저에 자동 저장 (최대 50개)

#### 5. **플랫폼 선택형 콘텐츠 생성**
- ✅ 네이버 블로그 (1,500~2,500자) ⭐ IMPROVED v5.0
  - 목차 자동 생성
  - 이모지 적극 활용
  - 복사-붙여넣기 최적화
  - 구분선과 정보 박스
- ✅ 인스타그램 (캡션 + 해시태그 25-30개)
- ✅ 스레드 (200-300자 + 해시태그 7-10개)
- ✅ 유튜브 숏폼 (스크립트 + 제목 + 설명 + 태그)
- 최소 1개 이상 선택 가능

#### 6. **AI 이미지 분석**
- OpenAI Vision API로 각 이미지 상세 분석
- 색상 톤, 분위기, 구도, 감정적 느낌 등 종합 분석
- 다중 이미지 동시 분석 지원

#### 7. **결과 관리**
- 탭 형태로 각 플랫폼 결과 표시
- 📋 복사 버튼 (클립보드) ⭐ NEW
- ✅ 복사됨! 토스트 메시지 ⭐ NEW
- 생성 시간 및 이미지 개수 표시

## URLs
- **개발 서버**: https://3000-i41cq3n8pxi55gachwryg-de59bda9.sandbox.novita.ai
- **버전**: v7.9 (PC 최적화 사이드바)
- **GitHub**: (배포 후 업데이트 예정)
- **프로덕션**: (Cloudflare Pages 배포 후 업데이트)

## 데이터 아키텍처

### 입력 데이터 구조
```typescript
{
  // 필수 필드
  brand: string;              // 브랜드명 / 서비스명 / 상품명
  keywords: string;           // 핵심 키워드 (쉼표 구분)
  images: string[];           // base64 이미지 배열
  platforms: string[];        // 선택된 플랫폼
  apiKey: string;            // OpenAI API 키 (LocalStorage에서)
  
  // 선택 필드 (확장 정보)
  companyName?: string;       // 회사 상호명
  businessType?: string;      // 사업자 유형 (개인/법인/프리랜서)
  location?: string;          // 지역
  targetGender?: string;      // 타겟 성별 (전체/남성/여성)
  contact?: string;           // 연락처
  website?: string;           // 웹사이트 URL
  sns?: string;               // SNS 계정
  
  // 타겟팅 설정
  tone: string;               // 톤앤매너 (8개 중 선택)
  targetAge: string;          // 타겟 연령대
  industry: string;           // 산업 분야 (15개 중 선택)
}
```

### 출력 데이터 구조
```typescript
{
  success: boolean;
  data: {
    blog?: string;         // 네이버 블로그 콘텐츠
    instagram?: string;    // 인스타그램 콘텐츠
    threads?: string;      // 스레드 콘텐츠
    youtube?: string;      // 유튜브 숏폼 콘텐츠
  };
  generatedPlatforms: string[];
  imageCount: number;
}
```

## 사용 가이드

### 1. 시작하기

#### OpenAI API 키 설정 (관리자용) ⭐ CHANGED v3.2
**로컬 개발 환경:**
1. `.dev.vars` 파일에 API 키 추가:
   ```bash
   OPENAI_API_KEY=sk-proj-your-actual-api-key-here
   ```
2. 서버 재시작: `pm2 restart webapp`

**프로덕션 환경 (Cloudflare Pages):**
```bash
# Cloudflare Pages Secrets에 API 키 등록
npx wrangler pages secret put OPENAI_API_KEY --project-name webapp
```

**⚠️ 중요**: 
- API 키는 **백엔드에서만 관리**됩니다
- 프론트엔드에서는 API 키 입력 불가
- 사용자는 별도 설정 없이 바로 사용 가능

### 2. 콘텐츠 생성

#### 🎯 기본 워크플로우

1. **이미지 업로드**
   - 드래그 앤 드롭 또는 클릭하여 이미지 선택
   - 최대 10장, 총 50MB까지 업로드 가능
   - 편집 버튼으로 이미지 편집 가능 (흑백, 밝기, 대비, 압축)

2. **기본 정보 입력** (필수)
   - 브랜드명 / 서비스명 / 상품명 (필수) ⭐ IMPROVED
   - 핵심 키워드 (필수, 쉼표로 구분)

3. **확장 정보 입력** (선택)
   - 회사 상호명, 사업자 유형, 지역
   - 타겟 성별, 연락처, 웹사이트, SNS 계정

4. **타겟팅 설정**
   - 톤앤매너 (8개 중 선택) ⭐ IMPROVED
   - 타겟 연령대, 산업 분야 (15개 중 선택) ⭐ IMPROVED

5. **플랫폼 선택**
   - 생성하고 싶은 플랫폼 체크박스 선택 (최소 1개)
   - **실시간 비용 확인** ⭐ IMPROVED
     - 이미지 개수와 플랫폼에 따라 자동 계산
     - 달러 + 원화 동시 표시
     - 예상 소요 시간 확인

6. **콘텐츠 생성**
   - "콘텐츠 생성하기" 버튼 클릭
   - **로딩 화면** ⭐ NEW
     - 전체 화면 오버레이
     - 진행률 바 (0%~100%)
     - 단계별 메시지
   - 약 14~60초 대기 (이미지 개수와 플랫폼 개수에 따라 다름)

7. **결과 확인**
   - 탭을 클릭하여 각 플랫폼 콘텐츠 확인
   - **📋 복사하기 버튼** 클릭 ⭐ NEW
   - **✅ 복사됨!** 토스트 메시지 확인 ⭐ NEW

8. **에러 발생 시** ⭐ NEW
   - 구체적인 에러 메시지와 해결 방법 확인
   - [재시도] 버튼으로 바로 다시 시도

#### 💡 확장된 프로필 관리 ⭐ IMPROVED v3.2

**프로필에 저장되는 정보:**
- 브랜드명/서비스명/상품명
- 산업분야 (예: 라이프스타일, 테크, 뷰티)
- 타겟 연령대 (예: 20대, 30대)
- 톤앤매너 (예: 친근한, 전문적인)
- **선택한 플랫폼** ⭐ (예: A회사는 블로그만, B회사는 블로그+인스타)
- 회사 설명
- 웹사이트 URL
- SNS 계정
- 연락처
- 지역 정보

**프로필 저장:**
1. 브랜드 정보 **및 플랫폼** 선택 완료
2. "프로필 저장" 버튼 클릭
3. 프로필 이름 입력
4. 저장 완료

**프로필 불러오기:**
1. "프로필 불러오기" 버튼 클릭
2. 저장된 프로필 목록에서 선택
3. **모든 필드 + 플랫폼 체크박스**가 자동으로 채워짐
4. 바로 콘텐츠 생성 가능!

#### 📜 히스토리 활용

**히스토리 조회:**
1. "히스토리" 버튼 클릭
2. 날짜별 생성 목록 확인
3. 원하는 항목 클릭하여 재확인
4. 📋 복사하기로 다시 사용

#### 📝 템플릿 커스터마이징 ⭐ NEW

**템플릿 편집:**
1. "템플릿" 버튼 클릭
2. 플랫폼 선택 (블로그/인스타/스레드/유튜브)
3. 프롬프트 편집 텍스트박스에서 수정
4. **변수 사용**: {브랜드명}, {키워드}, {톤앤매너} 등
5. [저장] 버튼으로 저장
6. [기본값 초기화]로 언제든지 복원 가능

## 프로젝트 구조

```
webapp/
├── src/
│   ├── index.tsx              # 메인 Hono 애플리케이션 및 API 라우트
│   ├── prompts.ts             # 플랫폼별 프롬프트 템플릿
│   └── html-template.ts       # HTML 템플릿
├── public/
│   └── static/
│       ├── app-v3-enhanced.js # 프론트엔드 JavaScript (최신) ⭐
│       └── i18n.js            # 다국어 지원
├── dist/                      # 빌드 결과물 (자동 생성)
│   └── _worker.js             # Cloudflare Workers 번들
├── ecosystem.config.cjs       # PM2 설정
├── package.json               # 의존성 및 스크립트
├── tsconfig.json              # TypeScript 설정
├── vite.config.ts             # Vite 빌드 설정
└── wrangler.jsonc             # Cloudflare Pages 설정
```

## 기술 상세

### 백엔드 (Hono)
- **프레임워크**: Hono (경량, 빠른 edge 프레임워크)
- **런타임**: Cloudflare Workers (edge 환경)
- **API 엔드포인트**: `/api/generate`
- **CORS**: 모든 `/api/*` 경로에 CORS 활성화
- **API 키 처리**: 클라이언트에서 전달받은 API 키 사용 ⭐ NEW

### 프론트엔드
- **UI 프레임워크**: Tailwind CSS (CDN)
- **아이콘**: Font Awesome (CDN)
- **JavaScript**: Vanilla JS (프레임워크 없음)
- **로컬 저장소**: LocalStorage (API 키, 프로필, 히스토리, 템플릿)
- **기능**: 이미지 업로드, 폼 처리, 결과 표시, 복사/토스트

### AI 처리
- **모델**: GPT-4o 고정 (텍스트 생성 + 이미지 분석) ⭐
- **Vision API**: 이미지 상세 분석 (색상, 분위기, 구도 등)
- **병렬 처리**: 이미지 분석 및 콘텐츠 생성 동시 진행
- **토큰 최적화**: 프롬프트 최적화로 비용 절감

## 비용 예상

### OpenAI API 비용 (GPT-4o 고정)

**1. 이미지 분석**
- 이미지 1장당: $0.01 (약 ₩13)
- 10장 최대: $0.10 (약 ₩130)

**2. 콘텐츠 생성**
- 블로그: $0.04 (약 ₩52) - 2,000자 생성
- 인스타그램: $0.03 (약 ₩39) - 캡션 + 해시태그
- 스레드: $0.02 (약 ₩26) - 짧은 텍스트
- 유튜브: $0.04 (약 ₩52) - 스크립트 + 메타데이터

**예상 총 비용 & 소요 시간:**

| 상황 | 이미지 | 플랫폼 | 달러 | 원화 | 예상 시간 |
|------|--------|--------|------|------|-----------|
| 최소 | 1장 | 블로그만 | $0.05 | ₩65 | ~14초 |
| 일반 | 2장 | 블로그+인스타 | $0.09 | ₩117 | ~17초 |
| 권장 | 4장 | 전체 4개 | $0.17 | ₩221 | ~20초 |
| 최대 | 10장 | 전체 4개 | $0.23 | ₩299 | ~20초 |

**💡 실시간 비용 계산** ⭐ IMPROVED
- 앱에서 이미지와 플랫폼을 선택하면 실시간으로 예상 비용 표시
- 환율은 24시간마다 자동 업데이트
- 예상 소요 시간도 함께 표시

## 로컬 개발

```bash
# 의존성 설치
npm install

# 프로젝트 빌드
npm run build

# 개발 서버 시작 (PM2)
pm2 start ecosystem.config.cjs

# 서버 상태 확인
pm2 list

# 로그 확인 (비차단)
pm2 logs webapp --nostream

# 서버 재시작
fuser -k 3000/tcp 2>/dev/null || true
pm2 restart webapp

# 서버 중지
pm2 stop webapp
pm2 delete webapp
```

## 주의사항

### ⚠️ OpenAI API 키 보안
- API 키는 **백엔드 환경변수**로만 관리됩니다 ⭐ CHANGED v3.2
- 프론트엔드에는 절대 노출되지 않습니다
- `.dev.vars` 파일은 Git에 커밋되지 않습니다
- 프로덕션에서는 Cloudflare Pages Secrets 사용
- 관리자만 API 키 설정 가능

### ⚠️ 이미지 크기 제한
- 최대 10장, 총 50MB 제한
- 대용량 이미지는 처리 시간이 길어질 수 있음
- 권장: 이미지당 5MB 이하

### ⚠️ API 비용 관리
- 각 요청마다 OpenAI API 비용 발생
- 이미지 개수와 플랫폼 개수에 따라 비용 증가
- 실시간 비용 계산기로 미리 확인 ⭐

## 트러블슈팅

### 1. "OpenAI API 키가 서버에 설정되지 않았습니다" 오류 ⭐ CHANGED v3.2
- 관리자에게 연락하여 API 키 설정을 요청하세요
- 로컬 개발: `.dev.vars` 파일에 `OPENAI_API_KEY` 추가 필요
- 프로덕션: Cloudflare Pages Secrets에 API 키 등록 필요
- 일반 사용자는 별도 조치 불필요 (관리자가 설정)

### 2. 이미지 업로드 실패
- 파일 크기 확인 (총 50MB 이하)
- 이미지 형식 확인 (JPEG, PNG, GIF 등)
- 토스트 메시지에서 구체적인 에러 확인 ⭐

### 3. 콘텐츠 생성 오류 ⭐ IMPROVED
- 에러 모달에 구체적인 원인과 해결 방법이 표시됩니다
- [재시도] 버튼으로 바로 다시 시도하세요
- API 키가 유효한지 확인하세요
- 네트워크 연결을 확인하세요

### 4. 서버 시작 실패
- 포트 3000 사용 중 확인: `fuser -k 3000/tcp`
- 빌드 재실행: `npm run build`
- PM2 재시작: `pm2 restart webapp`

## 개발 로드맵

### ✅ 완료된 기능 (v7.9)
- ✅ **PC 최적화 사이드바** (v7.9) ⭐⭐⭐ - 우측 고정 사이드바, 빠른 메뉴, 실시간 정보
- ✅ **하이브리드 AI 판단 시스템** (v6.0) ⭐⭐⭐ - 이미지-키워드 매칭 분석 및 전략 자동 선택
- ✅ **배치 생성 기능** (v5.3) ⭐⭐⭐ - 월간 콘텐츠 대량 생성
- ✅ **이미지 100장/200MB 확장** (v5.3) ⭐⭐
- ✅ **네이버 블로그 복사-붙여넣기 최적화** (v5.0) ⭐⭐
- ✅ **범용 프롬프트 (사람처럼 작성)** (v5.1) ⭐⭐
- ✅ **전체 기능 복원** (v5.2) - 다운로드/검색/필터/편집
- ✅ **AI 키워드 추천 버튼 수정** (v4.1.1)
- ✅ **Floating Action Bar** (v4.1) - 홈/재생성/복사 버튼
- ✅ **콘텐츠 수정 에디터** (v4.0)
- ✅ **히스토리 검색/필터** (v4.0)
- ✅ **프로필 가져오기/내보내기** (v4.0)
- ✅ **생성 결과 다운로드 (Word/Excel/TXT)** (v4.0)
- ✅ **백엔드 API 키 관리** (v3.2) ⭐
- ✅ **확장된 프로필 구조 (선택한 플랫폼 포함)** (v3.2) ⭐
- ✅ **개선된 기본 템플릿 (SEO, 마케팅 전략)** (v3.2) ⭐
- ✅ **강화된 실시간 비용 계산기** (v3.1)
- ✅ **로딩/에러 UI (진행률, 재시도)** (v3.1)
- ✅ **템플릿 관리 시스템 (변수, 편집, 저장)** (v3.1)
- ✅ **복사 버튼 & 토스트 메시지** (v3.1)
- ✅ **브랜드명 필드 확장** (v3.1)
- ✅ **산업분야 15개 확장** (v3.1)
- ✅ **톤앤매너 8개 확장** (v3.1)
- ✅ **GPT-4o 고정** (v3.1)
- ✅ **언어 선택 간소화 (KR/US)** (v3.1)
- ✅ 이미지 편집 (v3.0) - 필터, 압축 기능
- ✅ 비용 계산기 (v2.0) - 실시간 달러/원화
- ✅ 프로필 관리 (v2.0) - 저장/불러오기
- ✅ 콘텐츠 히스토리 (v2.0) - 자동 저장/재사용
- ✅ 확장 입력 폼 (v2.0) - 회사명, 지역, 성별 등
- ✅ 4개 플랫폼 콘텐츠 생성
- ✅ 이미지 AI 분석 (OpenAI Vision)
- ✅ 반응형 UI

### 📋 향후 계획 (v7.0)
- 📋 커스텀 템플릿 백엔드 적용
- 📋 이미지 크롭/회전 추가
- 📋 추가 플랫폼 (페이스북, TikTok)
- 📋 콘텐츠 A/B 테스트
- 📋 PWA 지원
- 📋 전략 수동 선택 UI 추가

## 라이선스
MIT License

## 개발자
GenSpark AI Agent

## 마지막 업데이트
- **버전**: v7.9 PC 최적화 사이드바
- **날짜**: 2026-01-12
- **변경사항**: 
  - **우측 사이드바 패널 추가** ⭐⭐⭐
    - PC (1280px+): 고정 사이드바 (sticky position)
    - 모바일/태블릿: 햄버거 메뉴 슬라이드
    - 빠른 메뉴: 히스토리, 템플릿, 프로필 저장/관리
    - 실시간 정보: 크레딧, 사용자명, 이메일
    - 향후 추가: 즐겨찾기, SNS 바로가기
  - v6.0-v7.1 기능 유지:
    - 하이브리드 AI 판단 시스템 (v6.0)
    - 프론트엔드 회원 시스템 (v7.1)
    - 배치 생성 기능 (v5.3)
    - 네이버 블로그 최적화 (v5.0)
